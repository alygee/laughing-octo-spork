{"version":3,"file":"VaFileUploadGalleryItem.vue_vue&type=script&lang.js","sources":["../../../../../src/components/va-file-upload/VaFileUploadGalleryItem/VaFileUploadGalleryItem.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"removed\"\n    class=\"va-file-upload-gallery-item\"\n    :class=\"{'va-file-upload-gallery-item--undo': removed}\"\n  >\n    <va-file-upload-undo\n      class=\"va-file-upload-gallery-item--undo\"\n      @recover=\"recoverImage\"\n    />\n  </div>\n\n  <div\n    v-else\n    class=\"va-file-upload-gallery-item\"\n    :class=\"{'file-upload-gallery-item_not-image': !this.previewImage}\"\n  >\n    <img\n      v-if=\"previewImage\"\n      :src=\"previewImage\"\n      alt=\"\"\n      class=\"va-file-upload-gallery-item__image\"\n    >\n    <div\n      class=\"va-file-upload-gallery-item__overlay\"\n      :style=\"overlayStyles\"\n    >\n      <div\n        class=\"va-file-upload-gallery-item__name\"\n        :title=\"file.name\"\n      >\n        {{ file.name }}\n      </div>\n      <va-icon\n        name=\"delete_outline\"\n        color=\"danger\"\n        class=\"va-file-upload-gallery-item__delete\"\n        @click=\"removeImage()\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { watch } from 'vue'\nimport { Options, Vue, prop, mixins } from 'vue-class-component'\n\nimport { colorToRgba } from '../../../services/color-config/color-functions'\nimport VaIcon from '../../va-icon'\n\nimport VaFileUploadUndo from '../VaFileUploadUndo'\n\nclass FileUploadGalleryItemProps {\n  file = prop<any>({\n    type: Object,\n    default: null,\n  })\n\n  color = prop<string>({\n    type: String,\n    default: 'success',\n  })\n}\n\nconst FileUploadGalleryItemPropsMixin = Vue.with(FileUploadGalleryItemProps)\n\n@Options({\n  name: 'VaFileUploadGalleryItem',\n  components: {\n    VaIcon,\n    VaFileUploadUndo,\n  },\n  emits: ['remove'],\n})\nexport default class VaFileUploadGalleryItem extends mixins(FileUploadGalleryItemPropsMixin) {\n  previewImage = ''\n  removed = false\n\n  created () {\n    watch(() => this.$props.file, () => {\n      this.convertToImg()\n    })\n  }\n\n  get overlayStyles () {\n    return {\n      backgroundColor: colorToRgba(this.$props.color as string, 0.7),\n    }\n  }\n\n  removeImage () {\n    this.removed = true\n    setTimeout(() => {\n      if (this.removed) {\n        this.$emit('remove')\n        this.removed = false\n      }\n    }, 2000)\n  }\n\n  recoverImage () {\n    this.removed = false\n  }\n\n  convertToImg () {\n    if (!this.$props.file.name) {\n      return\n    }\n    if (this.$props.file.image && this.$props.file.image.url) {\n      this.previewImage = this.$props.file.image.url\n    } else {\n      const reader = new FileReader()\n      reader.readAsDataURL(this?.$props?.file?.image)\n      reader.onload = (e: any) => {\n        if (e.target.result.includes('image')) {\n          this.previewImage = e.target.result\n        }\n      }\n    }\n  }\n\n  mounted () {\n    this.convertToImg()\n  }\n}\n</script>\n\n<style lang='scss'>\n@import '../../../styles/resources/resources';\n\n$max-image-size: 8.5714rem;\n\n.va-file-upload-gallery-item {\n  display: flex;\n  position: relative;\n  margin-bottom: 1rem;\n  margin-right: 0.5rem;\n  flex-basis: calc(14.2857% - 0.5rem);\n  max-width: calc(14.2857% - 0.5rem);\n  border-radius: 0.375rem;\n  overflow: hidden;\n  width: 100%;\n  align-items: stretch;\n\n  @include media-breakpoint-down(md) {\n    flex-basis: calc(16.667% - 0.5rem);\n    max-width: calc(16.667% - 0.5rem);\n  }\n\n  @include media-breakpoint-down(sm) {\n    flex-basis: calc(20% - 0.5rem);\n    max-width: calc(20% - 0.5rem);\n  }\n\n  @include media-breakpoint-down(xs) {\n    flex-basis: calc(50% - 0.5rem);\n    max-width: calc(50% - 0.5rem);\n  }\n\n  &:last-of-type {\n    margin-right: 0;\n  }\n\n  &:hover {\n    .va-file-upload-gallery-item__overlay {\n      z-index: 1;\n    }\n  }\n\n  &__overlay {\n    display: flex;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    top: 0;\n    left: 0;\n    flex-direction: column;\n    padding: 0.5rem;\n    background: rgba($lighter-green, 0.8);\n    z-index: -1;\n  }\n\n  &__image {\n    width: 100%;\n    box-shadow: $card-box-shadow;\n    object-fit: cover;\n  }\n\n  &__name {\n    color: $vue-darkest-blue;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-size: 0.875rem;\n  }\n\n  &__delete {\n    cursor: pointer;\n    font-size: 1.5rem;\n    margin-top: auto;\n  }\n\n  &--undo {\n    box-shadow: none;\n\n    .va-file-upload-gallery-item--undo {\n      padding: 0.5rem;\n      display: flex;\n      flex-direction: column;\n      font-size: 0.875rem;\n      height: 100%;\n      justify-content: space-between;\n      align-items: flex-start;\n\n      span {\n        margin-right: 0.5rem;\n      }\n\n      .va-button {\n        margin: 0;\n      }\n    }\n  }\n}\n\n.file-upload-gallery-item_not-image {\n  .file-upload-gallery-item__overlay {\n    display: flex;\n  }\n}\n\n</style>\n"],"names":["FileUploadGalleryItemPropsMixin","Vue","with","constructor","this","prop","type","Object","default","String","VaFileUploadGalleryItem","mixins","created","watch","$props","file","convertToImg","overlayStyles","backgroundColor","colorToRgba","color","removeImage","removed","setTimeout","$emit","recoverImage","name","image","url","previewImage","reader","FileReader","readAsDataURL","onload","e","target","result","includes","mounted","Options","components","VaIcon","VaFileUploadUndo","emits"],"mappings":"4WAgEA,MAAMA,EAAkCC,EAAIC,KAZ5C,MAAAC,cACEC,UAAOC,EAAU,CACfC,KAAMC,OACNC,QAAS,OAGXJ,WAAQC,EAAa,CACnBC,KAAMG,OACND,QAAS,eAcb,IAAqBE,EAArB,cAAqDC,EAAOX,IAA5DG,kCACEC,kBAAe,GACfA,cAAU,EAEVQ,UACEC,GAAM,IAAMT,KAAKU,OAAOC,OAAM,KAC5BX,KAAKY,kBAITC,oBACE,MAAO,CACLC,gBAAiBC,EAAYf,KAAKU,OAAOM,MAAiB,KAI9DC,cACEjB,KAAKkB,SAAU,EACfC,YAAW,KACLnB,KAAKkB,UACPlB,KAAKoB,MAAM,UACXpB,KAAKkB,SAAU,KAEhB,KAGLG,eACErB,KAAKkB,SAAU,EAGjBN,uBACE,GAAKZ,KAAKU,OAAOC,KAAKW,KAGtB,GAAItB,KAAKU,OAAOC,KAAKY,OAASvB,KAAKU,OAAOC,KAAKY,MAAMC,IACnDxB,KAAKyB,aAAezB,KAAKU,OAAOC,KAAKY,MAAMC,QACtC,CACL,MAAME,EAAS,IAAIC,WACnBD,EAAOE,kCAAc5B,MAAAA,YAAAA,KAAMU,6BAAQC,2BAAMY,OACzCG,EAAOG,OAAUC,IACXA,EAAEC,OAAOC,OAAOC,SAAS,WAC3BjC,KAAKyB,aAAeK,EAAEC,OAAOC,UAMrCE,UACElC,KAAKY,iBAhDYN,KARpB6B,EAAQ,CACPb,KAAM,0BACNc,WAAY,CACVC,OAAAA,EACAC,iBAAAA,GAEFC,MAAO,CAAC,aAEWjC,SAAAA"}