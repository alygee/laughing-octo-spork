import{__decorate as e}from"tslib";import{Vue as t,mixins as i,Options as l,prop as s}from"../../node_modules/vue-class-component/dist/vue-class-component.esm-bundler.js";import o from"../../services/color-config/ColorMixin.js";import{shiftHSLAColor as r}from"../../services/color-config/color-functions.js";import a from"../va-button/index.js";import n from"../va-modal/index.js";import d from"./VaFileUploadList/index.js";const u=t.with(class{constructor(){this.type=s({type:String,default:"list",validator:e=>["list","gallery","single"].includes(e)}),this.fileTypes=s({type:String,default:""}),this.dropzone=s({type:Boolean,default:!1}),this.modelValue=s({type:Array,default:()=>[]}),this.color=s({type:String,default:"primary"}),this.disabled=s({type:Boolean,default:!1})}});let f=class extends(i(o,u)){constructor(){super(...arguments),this.modal=!1}get computedStyle(){return{backgroundColor:this.dropzone?r(this.colorComputed,{a:-.92}):"transparent"}}get files(){return this.modelValue}set files(e){this.$emit("update:modelValue",e)}changeFieldValue(e){this.uploadFile(e),this.$refs.fileInput.value=""}uploadFile(e){let t=e.target.files||e.dataTransfer.files;this.fileTypes&&(t=this.validateFiles(Array.from(t))),this.files=[...this.files,...t]}removeFile(e){this.files.splice(e,1)}removeSingleFile(){this.files=[]}validateFiles(e){return e.filter((e=>{const t=e.name||e.url;if(t){if(e.url)return!0;{if(["audio/*","video/*","image/*"].find((e=>this.fileTypes.includes(e))))return!0;const e=t.substring(t.lastIndexOf(".")+1).toLowerCase(),i=this.fileTypes.includes(e);return i||(this.modal=!0),i}}return!1}))}callFileDialogue(){this.$refs.fileInput.click()}mounted(){this.files=this.validateFiles(this.files)}};f=e([l({name:"VaFileUpload",components:{VaModal:n,VaButton:a,VaFileUploadList:d},emits:["update:modelValue"]})],f);var p=f;export default p;
//# sourceMappingURL=VaFileUpload.vue_vue&type=script&lang.js.map
