{"version":3,"file":"VaBacktop.vue_vue&type=script&lang.js","sources":["../../../../src/components/va-backtop/VaBacktop.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"visible\"\n    class=\"va-backtop\"\n    :style=\"computedStyle\"\n    @click=\"scrollToTop()\"\n  >\n    <slot>\n      <va-button\n        icon=\"expand_less\"\n        :color=\"color\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, mixins, prop, Vue } from 'vue-class-component'\n\nimport VaButton from '../va-button'\n\nclass Props {\n  target = prop<Element | string | undefined>({\n    type: [Object, String],\n    default: () => window,\n  })\n\n  visibilityHeight = prop<number>({ type: Number, default: 300 })\n  speed = prop<number>({ type: Number, default: 50 })\n  verticalOffset = prop<string>({ type: String, default: '1rem' })\n  horizontalOffset = prop<string>({ type: String, default: '1rem' })\n  color = prop<string>({ type: String, default: '' })\n  horizontalPosition = prop<string>({\n    type: String,\n    default: 'right',\n    validator: (value: string) => {\n      return ['right', 'left'].includes(value)\n    },\n  })\n\n  verticalPosition = prop<string>({\n    type: String,\n    default: 'bottom',\n    validator: (value: string) => {\n      return ['bottom', 'top'].includes(value)\n    },\n  })\n}\n\nconst PropsMixin = Vue.with(Props)\n\n@Options({\n  name: 'VaBacktop',\n  components: { VaButton },\n})\nexport default class VaBacktop extends mixins(\n  PropsMixin,\n) {\n  visible = false\n  scrolled = false\n  interval = 0\n\n  get computedStyle () {\n    return {\n      [this.verticalPosition]: this.verticalOffset,\n      [this.horizontalPosition]: this.horizontalOffset,\n    }\n  }\n\n  get targetElement (): Element {\n    return typeof this.target === 'string'\n      ? document.querySelector(this.target)\n      : (this.target || this.$el.parentElement)\n  }\n\n  handleScroll (): void {\n    this.visible = this.targetElement.scrollTop > this.visibilityHeight\n  }\n\n  scrollToTop (): void {\n    if (this.scrolled) {\n      return\n    }\n    this.scrolled = true\n    this.interval = window.setInterval(() => {\n      const next = Math.floor(this.targetElement.scrollTop - this.speed)\n      if (this.targetElement.scrollTop === 0) {\n        clearInterval(this.interval)\n        this.scrolled = false\n      } else {\n        this.targetElement.scrollTo(0, next)\n      }\n    }, 15)\n  }\n\n  mounted () {\n    this.targetElement.addEventListener('scroll', this.handleScroll)\n  }\n\n  beforeUnmount () {\n    this.targetElement.removeEventListener('scroll', this.handleScroll)\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../styles/resources/resources';\n@import 'variables';\n\n.va-backtop {\n  position: var(--va-backtop-position);\n  top: var(--va-backtop-top);\n  left: var(--va-backtop-left);\n  right: var(--va-backtop-right);\n  bottom: var(--va-backtop-bottom);\n  cursor: var(--va-backtop-cursor);\n  z-index: var(--va-backtop-z-index);\n}\n</style>\n"],"names":["PropsMixin","Vue","with","constructor","this","prop","type","Object","String","default","window","Number","validator","value","includes","VaBacktop","mixins","computedStyle","verticalPosition","verticalOffset","horizontalPosition","horizontalOffset","targetElement","target","document","querySelector","$el","parentElement","handleScroll","visible","scrollTop","visibilityHeight","scrollToTop","scrolled","interval","setInterval","next","Math","floor","speed","clearInterval","scrollTo","mounted","addEventListener","beforeUnmount","removeEventListener","Options","name","components","VaButton"],"mappings":"gNAiDA,MAAMA,EAAaC,EAAIC,KA5BvB,MAAAC,cACEC,YAASC,EAAmC,CAC1CC,KAAM,CAACC,OAAQC,QACfC,QAAS,IAAMC,SAGjBN,sBAAmBC,EAAa,CAAEC,KAAMK,OAAQF,QAAS,MACzDL,WAAQC,EAAa,CAAEC,KAAMK,OAAQF,QAAS,KAC9CL,oBAAiBC,EAAa,CAAEC,KAAME,OAAQC,QAAS,SACvDL,sBAAmBC,EAAa,CAAEC,KAAME,OAAQC,QAAS,SACzDL,WAAQC,EAAa,CAAEC,KAAME,OAAQC,QAAS,KAC9CL,wBAAqBC,EAAa,CAChCC,KAAME,OACNC,QAAS,QACTG,UAAYC,GACH,CAAC,QAAS,QAAQC,SAASD,KAItCT,sBAAmBC,EAAa,CAC9BC,KAAME,OACNC,QAAS,SACTG,UAAYC,GACH,CAAC,SAAU,OAAOC,SAASD,QAWxC,IAAqBE,EAArB,cAAuCC,EACrChB,IADFG,kCAGEC,cAAU,EACVA,eAAW,EACXA,cAAW,EAEXa,oBACE,MAAO,CACL,CAACb,KAAKc,kBAAmBd,KAAKe,eAC9B,CAACf,KAAKgB,oBAAqBhB,KAAKiB,kBAIpCC,oBACE,MAA8B,iBAAhBlB,KAAKmB,OACfC,SAASC,cAAcrB,KAAKmB,QAC3BnB,KAAKmB,QAAUnB,KAAKsB,IAAIC,cAG/BC,eACExB,KAAKyB,QAAUzB,KAAKkB,cAAcQ,UAAY1B,KAAK2B,iBAGrDC,cACM5B,KAAK6B,WAGT7B,KAAK6B,UAAW,EAChB7B,KAAK8B,SAAWxB,OAAOyB,aAAY,KACjC,MAAMC,EAAOC,KAAKC,MAAMlC,KAAKkB,cAAcQ,UAAY1B,KAAKmC,OACvB,IAAjCnC,KAAKkB,cAAcQ,WACrBU,cAAcpC,KAAK8B,UACnB9B,KAAK6B,UAAW,GAEhB7B,KAAKkB,cAAcmB,SAAS,EAAGL,KAEhC,KAGLM,UACEtC,KAAKkB,cAAcqB,iBAAiB,SAAUvC,KAAKwB,cAGrDgB,gBACExC,KAAKkB,cAAcuB,oBAAoB,SAAUzC,KAAKwB,gBA7CrCb,KAJpB+B,EAAQ,CACPC,KAAM,YACNC,WAAY,CAAEC,SAAAA,MAEKlC,SAAAA"}