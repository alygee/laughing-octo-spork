{"version":3,"file":"VaTab.vue_vue&type=script&lang.js","sources":["../../../../../src/components/va-tabs/VaTab/VaTab.vue"],"sourcesContent":["<template>\n  <component\n    class=\"va-tab\"\n    :is=\"tagComputed\"\n    :href=\"hrefComputed\"\n    :target=\"target\"\n    :to=\"to\"\n    :replace=\"replace\"\n    :exact=\"exact\"\n    :active-class=\"activeClass\"\n    :exact-active-class=\"exactActiveClass\"\n    :class=\"classComputed\"\n  >\n    <div\n      class=\"va-tab__content\"\n      v-on=\"context.keyboardFocusListeners\"\n      :tabindex=\"tabIndexComputed\"\n      @focus=\"onFocus()\"\n      @click=\"onTabClick()\"\n      @keydown.enter=\"onTabKeydown()\"\n    >\n      <slot>\n        <va-icon\n          v-if=\"icon\"\n          class=\"va-tab__icon\"\n          :name=\"icon\"\n          size=\"small\"\n        />\n        <span\n          class=\"va-tab__label\"\n          v-text=\"label\"\n        />\n      </slot>\n    </div>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { inject } from 'vue'\nimport { Options, mixins, prop, Vue, setup } from 'vue-class-component'\n\nimport useKeyboardOnlyFocus from '../../../composables/useKeyboardOnlyFocus'\nimport { RouterLinkMixin } from '../../../mixins/RouterLinkMixin/RouterLinkMixin'\nimport VaIcon from '../../va-icon'\n\nimport { TabsServiceKey, TabsService } from '../VaTabs.vue'\n\ntype Context = {\n  tabsService: TabsService;\n  hasKeyboardFocus: boolean;\n  keyboardFocusListeners: Record<string, () => void>;\n}\n\nclass TabProps {\n  icon = prop<string>({ type: String, default: null })\n  label = prop<string>({ type: String, default: null })\n  disabled = prop<boolean>({ type: Boolean })\n  name = prop<string | number>({ type: [String, Number] })\n  tag = prop<string>({ type: String, default: 'div' })\n}\n\nconst TabPropsMixin = Vue.with(TabProps)\n\n@Options({\n  name: 'VaTab',\n  components: { VaIcon },\n  emits: ['click', 'keydown-enter', 'focus'],\n})\nexport default class VaTab extends mixins(\n  RouterLinkMixin,\n  TabPropsMixin,\n) {\n  id: string | number | null = null\n  isActive = false\n  rightSidePosition = 0\n  leftSidePosition = 0\n\n  context: Context = setup(() => {\n    const tabsService = inject(TabsServiceKey) as TabsService\n\n    const { hasKeyboardFocus, keyboardFocusListeners } = useKeyboardOnlyFocus()\n\n    return {\n      tabsService,\n      hasKeyboardFocus,\n      keyboardFocusListeners,\n    }\n  })\n\n  get classComputed () {\n    return {\n      'va-tab--active': this.isActive,\n      'va-tab--disabled': this.$props.disabled,\n      'va-tab--on-keyboard-focus': this.context.hasKeyboardFocus,\n    }\n  }\n\n  get tabIndexComputed () {\n    return (this.$props.disabled || this.context.tabsService.disabled) ? -1 : 0\n  }\n\n  onTabClick () {\n    this.context.tabsService.tabClick(this)\n    this.$emit('click')\n  }\n\n  onTabKeydown () {\n    this.context.tabsService.tabPressEnter(this)\n    this.$emit('keydown-enter')\n  }\n\n  onFocus () {\n    console.log(this.context.hasKeyboardFocus)\n    if (this.context.hasKeyboardFocus) {\n      this.context.tabsService.tabFocus(this)\n    }\n    this.$emit('focus')\n  }\n\n  updateSidePositions () {\n    this.rightSidePosition = this.$el.offsetLeft + this.$el.offsetWidth\n    this.leftSidePosition = this.$el.offsetLeft\n  }\n\n  beforeMount () {\n    this.context.tabsService.register(this)\n  }\n\n  beforeUnmount () {\n    this.context.tabsService.unregister(this)\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../../styles/resources/resources\";\n@import 'variables';\n\n.va-tab {\n  align-items: var(--va-tab-align-items);\n  display: var(--va-tab-display);\n  flex: var(--va-tab-flex);\n  font-weight: var(--va-tab-font-weight);\n  line-height: var(--va-tab-line-height);\n  height: var(--va-tab-height);\n  max-width: var(--va-tab-max-width);\n  text-align: var(--va-tab-text-align);\n  vertical-align: var(--va-tab-vertical-align);\n  color: var(--va-tab-color);\n\n  &:not(.va-tab--active) {\n    opacity: 0.7;\n  }\n\n  &__content {\n    align-items: var(--va-tab-content-align-items);\n    color: var(--va-tab-content-color);\n    display: var(--va-tab-content-display);\n    flex: var(--va-tab-content-flex);\n    height: var(--va-tab-content-height);\n    justify-content: var(--va-tab-content-justify-content);\n    max-width: var(--va-tab-content-max-width);\n    text-decoration: var(--va-tab-content-text-decoration);\n    transition: var(--va-tab-content-transition);\n    user-select: var(--va-tab-content-user-select);\n    white-space: var(--va-tab-content-white-space);\n    padding: var(--va-tab-content-padding);\n    cursor: var(--va-tab-content-cursor);\n  }\n\n  &__icon {\n    margin-right: var(--va-tab-icon-margin-right);\n  }\n\n  &.va-tab--disabled {\n    @include va-disabled();\n\n    pointer-events: none;\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &.va-tab--on-keyboard-focus {\n    opacity: 1;\n  }\n}\n</style>\n"],"names":["TabPropsMixin","Vue","with","constructor","this","prop","type","String","default","Boolean","Number","VaTab","mixins","RouterLinkMixin","setup","tabsService","inject","TabsServiceKey","hasKeyboardFocus","keyboardFocusListeners","useKeyboardOnlyFocus","classComputed","isActive","$props","disabled","context","tabIndexComputed","onTabClick","tabClick","$emit","onTabKeydown","tabPressEnter","onFocus","console","log","tabFocus","updateSidePositions","rightSidePosition","$el","offsetLeft","offsetWidth","leftSidePosition","beforeMount","register","beforeUnmount","unregister","Options","name","components","VaIcon","emits"],"mappings":"odA6DA,MAAMA,EAAgBC,EAAIC,KAR1B,MAAAC,cACEC,UAAOC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,OAC7CJ,WAAQC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,OAC9CJ,cAAWC,EAAc,CAAEC,KAAMG,UACjCL,UAAOC,EAAsB,CAAEC,KAAM,CAACC,OAAQG,UAC9CN,SAAMC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,WAU9C,IAAqBG,EAArB,cAAmCC,EACjCC,EACAb,IAFFG,kCAIEC,QAA6B,KAC7BA,eAAW,EACXA,uBAAoB,EACpBA,sBAAmB,EAEnBA,aAAmBU,GAAM,KACvB,MAAMC,EAAcC,EAAOC,IAErBC,iBAAEA,EAAgBC,uBAAEA,GAA2BC,IAErD,MAAO,CACLL,YAAAA,EACAG,iBAAAA,EACAC,uBAAAA,MAIJE,oBACE,MAAO,CACL,iBAAkBjB,KAAKkB,SACvB,mBAAoBlB,KAAKmB,OAAOC,SAChC,4BAA6BpB,KAAKqB,QAAQP,kBAI9CQ,uBACE,OAAQtB,KAAKmB,OAAOC,UAAYpB,KAAKqB,QAAQV,YAAYS,UAAa,EAAI,EAG5EG,aACEvB,KAAKqB,QAAQV,YAAYa,SAASxB,MAClCA,KAAKyB,MAAM,SAGbC,eACE1B,KAAKqB,QAAQV,YAAYgB,cAAc3B,MACvCA,KAAKyB,MAAM,iBAGbG,UACEC,QAAQC,IAAI9B,KAAKqB,QAAQP,kBACrBd,KAAKqB,QAAQP,kBACfd,KAAKqB,QAAQV,YAAYoB,SAAS/B,MAEpCA,KAAKyB,MAAM,SAGbO,sBACEhC,KAAKiC,kBAAoBjC,KAAKkC,IAAIC,WAAanC,KAAKkC,IAAIE,YACxDpC,KAAKqC,iBAAmBrC,KAAKkC,IAAIC,WAGnCG,cACEtC,KAAKqB,QAAQV,YAAY4B,SAASvC,MAGpCwC,gBACExC,KAAKqB,QAAQV,YAAY8B,WAAWzC,QA7DnBO,KALpBmC,EAAQ,CACPC,KAAM,QACNC,WAAY,CAAEC,OAAAA,GACdC,MAAO,CAAC,QAAS,gBAAiB,YAEfvC,SAAAA"}