{"version":3,"file":"VaRating.vue_vue&type=script&lang.js","sources":["../../../../src/components/va-rating/VaRating.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-rating\"\n    :class=\"classList\"\n  >\n    <div\n      @keyup.left=\"onArrow($event, -1)\"\n      @keyup.right=\"onArrow($event, 1)\"\n      @mouseenter=\"onMouseEnter\"\n      @mouseleave=\"onMouseLeave\"\n      class=\"va-rating__item-wrapper\"\n    >\n      <template\n        v-if=\"$props.numbers\"\n      >\n        <va-rating-item\n          v-for=\"number in $props.max\"\n          :key=\"number\"\n          class=\"va-rating__number-item\"\n          :halves=\"$props.halves\"\n          :hover=\"hoverEnabled\"\n          :size=\"$props.size\"\n          :color=\"$props.color\"\n          :empty-icon-color=\"$props.unselectedColor\"\n          :tabindex=\"tabIndex\"\n          :modelValue=\"getItemValue(number)\"\n          @hover=\"onHover(number, $event)\"\n          @click=\"onItemSelected(number, $event)\"\n        >\n          <template v-slot=\"{ props }\">\n            <button\n              @click=\"props.onClick\"\n              class=\"va-rating__number-item\"\n              tabindex=\"-1\"\n              :style=\" {\n                background: props.value === 0.5\n                  ? `linear-gradient(90deg, ${colorComputed} 50%, ${focusColor} 50%`\n                  : !props.value ? focusColor : colorComputed,\n                color: props.value ? '#fff' : colorComputed,\n                width: sizeComputed,\n                height: sizeComputed,\n                fontSize: fontSizeComputed,\n                borderRadius: `${SizeMixin_fontSize * 0.125}rem`,\n              }\"\n            > {{ number }} </button>\n          </template>\n        </va-rating-item>\n      </template>\n      <template v-else>\n        <va-rating-item\n          v-for=\"itemNumber in $props.max\"\n          :key=\"itemNumber\"\n          :halves=\"$props.halves\"\n          :hover=\"hoverEnabled\"\n          :filled-icon-name=\"$props.icon\"\n          :half-icon-name=\"$props.halfIcon\"\n          :empty-icon-name=\"$props.emptyIcon\"\n          :size=\"$props.size\"\n          :color=\"$props.color\"\n          :empty-icon-color=\"$props.unselectedColor\"\n          :tabindex=\"tabIndex\"\n          :modelValue=\"getItemValue(itemNumber)\"\n          @hover=\"onHover(itemNumber, $event)\"\n          @click=\"onItemSelected(itemNumber, $event)\"\n        />\n      </template>\n    </div>\n    <span class=\"va-rating__text-wrapper\" v-if=\"$props.texts.length === $props.max\" :style=\"{ color: computeColor($props.textColor) }\">\n      {{ $props.texts[Math.round(valueProxy) - 1] }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, mixins, prop, Vue } from 'vue-class-component'\nimport { ColorInput } from 'colortranslator/dist/@types'\n\nimport { getFocusColor } from '../../services/color-config/color-functions'\nimport ColorMixin from '../../services/color-config/ColorMixin'\nimport { StatefulMixin } from '../../mixins/StatefulMixin/StatefulMixin'\nimport { SizeMixin } from '../../mixins/SizeMixin'\nimport VaRatingItem from './VaRatingItem'\nimport { RatingValue } from './VaRating.types'\n\nclass RatingProps {\n  modelValue = prop<number>({ type: Number, default: 0 })\n  icon = prop<string>({ type: String, default: 'star' })\n  halfIcon = prop<string>({ type: String, default: 'star_half' })\n  emptyIcon = prop<string>({ type: String, default: 'star_outline' })\n  readonly = prop<boolean>({ type: Boolean, default: false })\n  disabled = prop<boolean>({ type: Boolean, default: false })\n  numbers = prop<boolean>({ type: Boolean, default: false })\n  halves = prop<boolean>({ type: Boolean, default: false })\n  max = prop<number>({ type: Number, default: 5 })\n  clearable = prop<boolean>({ type: Boolean, default: false })\n  hover = prop<boolean>({ type: Boolean, default: false })\n  texts = prop<any[]>({ type: Array, default: () => [] })\n  textColor = prop<string>({ type: String })\n  unselectedColor = prop<string>({ type: String })\n  color = prop<string>({ type: String, default: 'primary' })\n}\n\nconst RatingPropsMixin = Vue.with(RatingProps)\n\n@Options({\n  name: 'VaRating',\n  components: { VaRatingItem },\n})\nexport default class VaRating extends mixins(\n  ColorMixin,\n  SizeMixin,\n  StatefulMixin,\n  RatingPropsMixin,\n) {\n  isHovered = false\n  forceEmit = false\n  hoveredValue = RatingValue.EMPTY\n\n  mounted () {\n    this.hoveredValue = this.valueComputed\n  }\n\n  get valueProxy (): number {\n    return this.isHovered ? this.hoveredValue : this.valueComputed\n  }\n\n  set valueProxy (value: number) {\n    this.hoveredValue = value\n    if (this.forceEmit) {\n      this.valueComputed = value\n      this.forceEmit = false\n    }\n  }\n\n  get focusColor () {\n    return this.$props.unselectedColor\n      ? this.computeColor(this.$props.unselectedColor)\n      : getFocusColor(this.colorComputed as ColorInput)\n  }\n\n  get classList () {\n    return {\n      'va-rating--disabled': this.$props.disabled,\n      'va-rating--readonly': this.$props.readonly,\n    }\n  }\n\n  get interactionsEnabled () {\n    return !(this.$props.disabled || this.$props.readonly)\n  }\n\n  get hoverEnabled () {\n    return this.$props.hover && this.interactionsEnabled\n  }\n\n  get tabIndex () {\n    return this.interactionsEnabled ? 0 : undefined\n  }\n\n  getItemValue (itemNumber: number): RatingValue {\n    const diff = itemNumber - this.valueProxy\n    switch (true) {\n    case diff <= 0: return RatingValue.FULL\n    case diff === RatingValue.HALF && this.$props.halves: return RatingValue.HALF\n    default: return RatingValue.EMPTY\n    }\n  }\n\n  onHover (itemNumber: number, value: RatingValue): void {\n    this.valueProxy = value === RatingValue.FULL\n      ? itemNumber\n      : itemNumber - RatingValue.HALF\n  }\n\n  onMouseEnter () {\n    this.isHovered = (this.hoverEnabled as boolean) && true\n  }\n\n  onMouseLeave () {\n    this.isHovered = false\n  }\n\n  onArrow (event: KeyboardEvent, directon: 1 | -1) {\n    const currentValue = this.valueProxy || RatingValue.EMPTY\n    const step = this.$props.halves ? RatingValue.HALF : RatingValue.FULL\n    const nextValue = currentValue + (step * directon)\n    if (nextValue < 0 || nextValue > (this.$props.max as number)) { return }\n\n    this.forceEmit = true\n    this.valueProxy = nextValue\n  }\n\n  onItemSelected (itemNumber: number, value: RatingValue) {\n    if (!this.interactionsEnabled) { return }\n    const currentClickedValue = this.$props.halves\n      ? value === RatingValue.HALF ? itemNumber - RatingValue.HALF : itemNumber\n      : itemNumber\n    const valueToEmit = this.$props.clearable && this.valueComputed === currentClickedValue\n      ? RatingValue.EMPTY\n      : currentClickedValue\n\n    this.forceEmit = true\n    this.valueProxy = valueToEmit\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources/resources\";\n@import 'variables';\n\n.va-rating {\n  display: var(--va-rating-display);\n\n  &__number-item {\n    @include normalize-button();\n\n    font-size: var(--va-rating-number-item-font-size);\n    margin: var(--va-rating-number-item-margin);\n    font-weight: var(--va-rating-number-item-font-weight);\n\n    @include flex-center();\n\n    cursor: pointer;\n\n    @at-root {\n      .va-rating--disabled & {\n        @include va-disabled();\n      }\n\n      .va-rating--readonly & {\n        cursor: default;\n      }\n    }\n  }\n\n  &__item-wrapper {\n    display: var(--va-rating-item-wrapper-display);\n    cursor: var(--va-rating-item-wrapper-cursor);\n\n    @at-root {\n      .va-rating--readonly &,\n      .va-rating--disabled & {\n        cursor: default;\n      }\n    }\n  }\n\n  &-item {\n    display: var(--va-rating-item-display);\n\n    @include flex-center();\n\n    .va-rating--disabled & {\n      @include va-disabled();\n\n      &__wrapper {\n        cursor: initial !important;\n      }\n    }\n\n    .va-rating--readonly & &__wrapper {\n      cursor: initial !important;\n    }\n  }\n\n  &__text-wrapper {\n    padding-left: 10px;\n  }\n}\n</style>\n"],"names":["RatingPropsMixin","Vue","with","constructor","this","prop","type","Number","default","String","Boolean","Array","VaRating","mixins","ColorMixin","SizeMixin","StatefulMixin","RatingValue","EMPTY","mounted","hoveredValue","valueComputed","valueProxy","isHovered","value","forceEmit","focusColor","$props","unselectedColor","computeColor","getFocusColor","colorComputed","classList","disabled","readonly","interactionsEnabled","hoverEnabled","hover","tabIndex","undefined","getItemValue","itemNumber","diff","FULL","HALF","halves","onHover","onMouseEnter","onMouseLeave","onArrow","event","directon","nextValue","max","onItemSelected","currentClickedValue","valueToEmit","clearable","Options","name","components","VaRatingItem"],"mappings":"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"}