{"version":3,"file":"VaRatingItem.vue_vue&type=template&id=63f57dc2&lang.js","sources":["../../../../../src/components/va-rating/VaRatingItem/VaRatingItem.vue?vue&type=template&id=63f57dc2&lang.js"],"sourcesContent":["<template>\n  <div\n    @mousemove=\"onHover\"\n    @mouseleave=\"removeHover()\"\n    @focus=\"onFocus()\"\n    @blur=\"onBlur()\"\n    :tabindex=\"$props.tabindex\"\n    class=\"va-rating-item\"\n    :class=\"{\n      'va-rating-item__isFocused': isFocused\n    }\"\n    @keyup.enter=\"onEnter\"\n  >\n    <slot :props=\"{\n      value: valueProxy, onClick\n    }\">\n      <va-icon\n        class=\"va-rating-item__wrapper\"\n        tabindex=\"-1\"\n        :name=\"computedIconName\"\n        :size=\"$props.size\"\n        tag=\"button\"\n        :color=\"computedColor\"\n        @click=\"onClick\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { watch } from 'vue'\nimport { Options, prop, Vue, mixins } from 'vue-class-component'\n\nimport ColorMixin from '../../../services/color-config/ColorMixin'\nimport { RatingValue } from '../VaRating.types'\nimport VaIcon from '../../va-icon'\n\nclass RatingItemProps {\n  modelValue = prop<number>({ type: Number, default: 0 })\n  filledIconName = prop<string>({ type: String, default: 'star' })\n  halfIconName = prop<string>({ type: String, default: 'star_half' })\n  emptyIconName = prop<string>({ type: String, default: 'star_empty' })\n  halves = prop<boolean>({ type: Boolean, default: false })\n  hover = prop<boolean>({ type: Boolean, default: false })\n  tabindex = prop<number>({ type: Number })\n  size = prop<string | number>({ type: [String, Number], default: 'medium' })\n  emptyIconColor = prop<string>({ type: String })\n  color = prop<string>({ type: String, default: 'primary' })\n}\n\nconst RatingItemPropsMixin = Vue.with(RatingItemProps)\n\n@Options({\n  name: 'VaRatingItem',\n  components: { VaIcon },\n  emits: ['click', 'hover'],\n})\nexport default class VaRatingItem extends mixins(\n  ColorMixin,\n  RatingItemPropsMixin,\n) {\n  private isHovered = false\n  private isFocused = false\n  private shouldEmitClick = false\n  private hoveredValue: RatingValue = this.modelValue\n\n  created () {\n    watch(() => this.$props.modelValue, (newVal) => {\n      this.hoveredValue = newVal as RatingValue\n    })\n  }\n\n  get computedIconName (): string {\n    if (this.halves && this.valueProxy === RatingValue.HALF) {\n      return this.halfIconName\n    }\n    return this.valueProxy === RatingValue.EMPTY\n      ? this.emptyIconName\n      : this.filledIconName\n  }\n\n  private get computedColor () {\n    return this.valueProxy === RatingValue.EMPTY\n      ? this.emptyIconColor || this.colorComputed\n      : this.colorComputed\n  }\n\n  private set valueProxy (value: RatingValue) {\n    this.hoveredValue = value\n    if (this.shouldEmitClick) {\n      this.shouldEmitClick = false\n      this.$emit('click', value)\n    } else if (this.isHovered) {\n      this.$emit('hover', value)\n    }\n  }\n\n  private get valueProxy (): RatingValue {\n    return this.isHovered ? this.hoveredValue : this.modelValue\n  }\n\n  private onClick (cursorPosition: MouseEvent) {\n    this.shouldEmitClick = true\n    this.processCursorInput(this.$el.clientWidth, cursorPosition.offsetX)\n  }\n\n  private processCursorInput (iconSize: number, offsetX: number) {\n    this.valueProxy = this.halves && (offsetX / iconSize <= RatingValue.HALF)\n      ? RatingValue.HALF\n      : RatingValue.FULL\n  }\n\n  private onEnter () {\n    this.shouldEmitClick = true\n    this.valueProxy = RatingValue.FULL\n  }\n\n  private onHover (cursorPosition: MouseEvent) {\n    if (!this.hover) {\n      return\n    }\n    this.isHovered = true\n    this.processCursorInput(this.$el.clientWidth, cursorPosition.offsetX)\n  }\n\n  private onFocus () {\n    this.isFocused = true\n  }\n\n  private onBlur () {\n    this.isFocused = false\n  }\n\n  private removeHover () {\n    this.valueProxy = this.modelValue\n    this.isHovered = false\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../../styles/resources/resources\";\n\n.va-rating-item {\n  display: inline-block;\n\n  &__isFocused {\n    transform: scale(1.1);\n  }\n\n  &__wrapper {\n    @include normalize-button();\n  }\n}\n</style>\n"],"names":["_mergeProps","tabindex","_ctx","class","props","name","size","tag","color"],"mappings":"4MACEA,GAKGC,SAAUC,SAAOD,SAClBE,OAAM,2FAMCC,2DAIHD,MAAM,0BACNF,SAAS,KACRI,KAAMH,mBACNI,KAAMJ,SAAOI,KACdC,IAAI,SACHC,MAAON"}