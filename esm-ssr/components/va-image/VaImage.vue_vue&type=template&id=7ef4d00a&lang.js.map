{"version":3,"file":"VaImage.vue_vue&type=template&id=7ef4d00a&lang.js","sources":["../../../../src/components/va-image/VaImage.vue?vue&type=template&id=7ef4d00a&lang.js"],"sourcesContent":["<template>\n  <div class=\"va-image\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n      ref=\"img\"\n    >\n      <img :style=\"imageStyles\" :src=\"src\" @error=\"handleError\" @load=\"handleLoad\" />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { watch } from 'vue'\nimport { Options, prop, Vue, mixins } from 'vue-class-component'\n\nclass ImageProps {\n  ratio = prop<number>({ type: [Number], default: 1 })\n  contain = prop<boolean>({ type: Boolean, default: false })\n  src = prop<string>({ type: String, required: true })\n}\n\nconst ImagePropsMixin = Vue.with(ImageProps)\n\n@Options({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n})\nexport default class VaImage extends mixins(\n  ImagePropsMixin,\n) {\n  loading = true\n  loadingError = false\n\n  created () {\n    watch(() => this.src, () => {\n      this.loading = true\n      this.loadingError = false\n    })\n  }\n\n  get imageStyles () {\n    return {\n      'object-fit': this.contain ? 'contain' : 'cover',\n    }\n  }\n\n  get paddingStyles () {\n    return {\n      'padding-bottom': `${1 / this.ratio * 100}%`,\n    }\n  }\n\n  handleLoad () {\n    this.loading = false\n    this.$emit('loaded', this.src)\n  }\n\n  handleError (err: string) {\n    this.loadingError = true\n    this.loading = false\n    this.$emit('error', err)\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources/resources\";\n@import 'variables';\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n"],"names":["_mergeProps","class","_ctx"],"mappings":"gLACEA,GAAKC,MAAM,oBAEDC,sIAMKA,yCAEFA,gBAAiBA,yEAIbA,oBAAc,MAAKA,8FAM1BA"}