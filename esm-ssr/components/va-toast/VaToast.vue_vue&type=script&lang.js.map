{"version":3,"file":"VaToast.vue_vue&type=script&lang.js","sources":["../../../../src/components/va-toast/VaToast.vue"],"sourcesContent":["<template>\n  <transition name=\"va-toast-fade\">\n    <div\n      v-show=\"visible\"\n      :class=\"['va-toast', $props.multiLine ? 'va-toast--multiline' : '', ...toastClasses]\"\n      :style=\"toastStyles\"\n      @mouseenter=\"clearTimer()\"\n      @mouseleave=\"startTimer()\"\n      @click=\"onToastClick()\"\n      role=\"alert\"\n    >\n      <div class=\"va-toast__group\">\n        <h2 v-if=\"title\" class=\"va-toast__title\" v-text=\"title\"></h2>\n\n        <div class=\"va-toast__content\" v-show=\"message\">\n          <p v-text=\"message\"></p>\n        </div>\n\n        <div class=\"va-toast__content\" v-if=\"render\">\n          <VaToastRenderer :content=\"render\" />\n        </div>\n\n        <va-icon\n          v-if=\"closeable\"\n          size=\"small\"\n          :name=\"icon\"\n          class=\"va-toast__close-icon\"\n          @click.stop=\"onToastClose\"\n        />\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { h, watch } from 'vue'\nimport { prop, mixins, Vue, Options } from 'vue-class-component'\nimport VaIcon from '../va-icon/VaIcon.vue'\n\nimport ColorMixin from '../../services/color-config/ColorMixin'\nimport { NotificationPosition } from './types'\n\nclass ToastProps {\n  title = prop<string>({ type: String, default: '' })\n  offsetY = prop<number>({ type: Number, default: 16 })\n  offsetX = prop<number>({ type: Number, default: 16 })\n  message = prop<string | Function>({ type: [String, Function] as any, default: '' })\n  icon = prop<string>({ type: String, default: 'close' })\n  customClass = prop<string>({ type: String, default: '' })\n  duration = prop<number>({ type: Number, default: 5000 })\n  color = prop<string>({ type: String, default: '' })\n  closeable = prop<boolean>({ type: Boolean, default: true })\n  onClose = prop<() => void>({ type: [Function, undefined] as any })\n  onClick = prop<() => void>({ type: [Function, undefined] as any })\n  multiLine = prop<boolean>({ type: Boolean, default: false })\n  position = prop<NotificationPosition>({\n    type: String as any,\n    default: 'top-right',\n    validator: (value: string) => {\n      return ['top-right', 'top-left', 'bottom-right', 'bottom-left'].includes(value)\n    },\n  })\n  render = prop<any>({ type: Function, default: undefined })\n}\n\nclass VaToastRendererProps {\n  content = prop<any>({ type: Function, default: undefined })\n}\n\nconst VaToastRendererPropsMixin = Vue.with(VaToastRendererProps)\n\n@Options({\n  name: 'VaToastRenderer',\n})\nclass VaToastRenderer extends mixins(VaToastRendererPropsMixin) {\n  render () {\n    return this.content(h)\n  }\n}\n\nconst ToastPropsMixin = Vue.with(ToastProps)\n\n@Options({\n  name: 'VaToast',\n  components: { VaIcon, VaToastRenderer },\n  emits: ['on-click', 'on-close'],\n})\nexport default class VaToast extends mixins(\n  ColorMixin,\n  ToastPropsMixin,\n) {\n  private timer: any = null\n  public visible = false\n\n  get positionX (): 'right' | 'left' {\n    return this.position.includes('right') ? 'right' : 'left'\n  }\n\n  get positionY (): 'top' | 'bottom' {\n    return this.position.includes('top') ? 'top' : 'bottom'\n  }\n\n  get toastClasses () {\n    return [this.customClass]\n  }\n\n  get toastStyles () {\n    return {\n      [this.positionY]: `${this.offsetY}px`,\n      [this.positionX]: `${this.offsetX}px`,\n      backgroundColor: this.colorComputed,\n    }\n  }\n\n  destroyElement () {\n    this.$el.removeEventListener('transitionend', this.destroyElement)\n\n    // TODO: not sure if this is really needed (it doesn't work in vue3)\n    // this.$destroy() // or this.$destroy(true)\n\n    this.$el.remove() // or this.$el.parentNode?.removeChild(this.$el)\n  }\n\n  onToastClick () {\n    if (typeof this.$props.onClick === 'function') {\n      this.$props.onClick()\n      return\n    }\n    this.$emit('click')\n  }\n\n  onToastClose () {\n    this.visible = false\n    this.$el.addEventListener('transitionend', this.destroyElement)\n    if (typeof this.onClose === 'function') {\n      this.onClose()\n      return\n    }\n    this.$emit('close')\n  }\n\n  clearTimer () {\n    if (this.timer) {\n      clearTimeout(this.timer)\n    }\n  }\n\n  startTimer () {\n    if (this.duration > 0) {\n      this.timer = setTimeout(() => {\n        if (this.visible) {\n          this.onToastClose()\n        }\n      }, this.duration)\n    }\n  }\n\n  mounted () {\n    this.visible = true\n    if (this.duration > 0) {\n      this.timer = setTimeout(() => {\n        if (this.visible) {\n          this.onToastClose()\n        }\n      }, this.duration)\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n@import \"../../styles/resources/resources\";\n@import 'variables';\n\n.va-toast {\n  display: flex;\n  width: $toast-width;\n  padding: $toast-padding;\n  align-items: center;\n  border-radius: $toast-radius;\n  box-sizing: border-box;\n  border: 1px solid var(--va-toast-border-color);\n  position: fixed;\n  background-color: white;\n  color: #ffffff;\n  box-shadow: $toast-shadow;\n  transition: opacity 0.3s, transform 0.3s, left 0.3s, right 0.3s, top 0.4s, bottom 0.3s;\n  overflow: hidden;\n\n  &--multiline {\n    min-height: 70px;\n  }\n\n  &--right {\n    right: 16px;\n  }\n\n  &--left {\n    left: 16px;\n  }\n\n  &__group {\n    margin-left: var(--va-toast-group-margin-left);\n    margin-right: var(--va-toast-group-margin-right);\n  }\n\n  &__title {\n    font-weight: var(--va-toast-title-font-weight);\n    font-size: var(--va-toast-title-font-size);\n    color: var(--va-toast-title-color);\n    margin: var(--va-toast-title-margin);\n  }\n\n  &__content {\n    font-size: var(--va-toast-content-font-size);\n    line-height: var(--va-toast-content-line-height);\n    padding-right: var(--va-toast-content-padding-right);\n\n    p {\n      margin: 0;\n    }\n  }\n\n  &__icon {\n    height: var(--va-toast-icon-height);\n    width: var(--va-toast-icon-width);\n    font-size: var(--va-toast-icon-font-size);\n  }\n\n  &__close-icon {\n    position: absolute;\n    top: 50%;\n    right: 15px;\n    cursor: pointer;\n    transform: translateY(-50%);\n    font-size: $toast-close-font-size;\n\n    &:hover {\n      color: var(--va-toast-hover-color);\n    }\n  }\n}\n\n.va-toast-fade-enter {\n  &.right {\n    right: 0;\n    transform: translateX(100%);\n  }\n\n  &.left {\n    left: 0;\n    transform: translateX(-100%);\n  }\n}\n\n.va-toast-fade-leave-active {\n  opacity: 0;\n}\n\n</style>\n"],"names":["VaToastRendererPropsMixin","Vue","with","constructor","this","prop","type","Function","default","undefined","VaToastRenderer","mixins","render","content","h","Options","name","ToastPropsMixin","String","Number","Boolean","validator","value","includes","VaToast","ColorMixin","positionX","position","positionY","toastClasses","customClass","toastStyles","offsetY","offsetX","backgroundColor","colorComputed","destroyElement","$el","removeEventListener","remove","onToastClick","$props","onClick","$emit","onToastClose","visible","addEventListener","onClose","clearTimer","timer","clearTimeout","startTimer","duration","setTimeout","mounted","components","VaIcon","emits"],"mappings":"0VAqEA,MAAMA,EAA4BC,EAAIC,KAJtC,MAAAC,cACEC,aAAUC,EAAU,CAAEC,KAAMC,SAAUC,aAASC,OAQjD,IAAMC,EAAN,cAA8BC,EAAOX,IACnCY,SACE,OAAOR,KAAKS,QAAQC,KAFlBJ,KAHLK,EAAQ,CACPC,KAAM,qBAEFN,GAMN,MAAMO,EAAkBhB,EAAIC,KAtC5B,MAAAC,cACEC,WAAQC,EAAa,CAAEC,KAAMY,OAAQV,QAAS,KAC9CJ,aAAUC,EAAa,CAAEC,KAAMa,OAAQX,QAAS,KAChDJ,aAAUC,EAAa,CAAEC,KAAMa,OAAQX,QAAS,KAChDJ,aAAUC,EAAwB,CAAEC,KAAM,CAACY,OAAQX,UAAkBC,QAAS,KAC9EJ,UAAOC,EAAa,CAAEC,KAAMY,OAAQV,QAAS,UAC7CJ,iBAAcC,EAAa,CAAEC,KAAMY,OAAQV,QAAS,KACpDJ,cAAWC,EAAa,CAAEC,KAAMa,OAAQX,QAAS,MACjDJ,WAAQC,EAAa,CAAEC,KAAMY,OAAQV,QAAS,KAC9CJ,eAAYC,EAAc,CAAEC,KAAMc,QAASZ,SAAS,IACpDJ,aAAUC,EAAiB,CAAEC,KAAM,CAACC,cAAUE,KAC9CL,aAAUC,EAAiB,CAAEC,KAAM,CAACC,cAAUE,KAC9CL,eAAYC,EAAc,CAAEC,KAAMc,QAASZ,SAAS,IACpDJ,cAAWC,EAA2B,CACpCC,KAAMY,OACNV,QAAS,YACTa,UAAYC,GACH,CAAC,YAAa,WAAY,eAAgB,eAAeC,SAASD,KAG7ElB,YAASC,EAAU,CAAEC,KAAMC,SAAUC,aAASC,OAyBhD,IAAqBe,EAArB,cAAqCb,EACnCc,EACAR,IAFFd,kCAIUC,WAAa,KACdA,cAAU,EAEjBsB,gBACE,OAAOtB,KAAKuB,SAASJ,SAAS,SAAW,QAAU,OAGrDK,gBACE,OAAOxB,KAAKuB,SAASJ,SAAS,OAAS,MAAQ,SAGjDM,mBACE,MAAO,CAACzB,KAAK0B,aAGfC,kBACE,MAAO,CACL,CAAC3B,KAAKwB,WAAY,GAAGxB,KAAK4B,YAC1B,CAAC5B,KAAKsB,WAAY,GAAGtB,KAAK6B,YAC1BC,gBAAiB9B,KAAK+B,eAI1BC,iBACEhC,KAAKiC,IAAIC,oBAAoB,gBAAiBlC,KAAKgC,gBAKnDhC,KAAKiC,IAAIE,SAGXC,eACqC,mBAAxBpC,KAAKqC,OAAOC,QAIvBtC,KAAKuC,MAAM,SAHTvC,KAAKqC,OAAOC,UAMhBE,eACExC,KAAKyC,SAAU,EACfzC,KAAKiC,IAAIS,iBAAiB,gBAAiB1C,KAAKgC,gBACpB,mBAAjBhC,KAAK2C,QAIhB3C,KAAKuC,MAAM,SAHTvC,KAAK2C,UAMTC,aACM5C,KAAK6C,OACPC,aAAa9C,KAAK6C,OAItBE,aACM/C,KAAKgD,SAAW,IAClBhD,KAAK6C,MAAQI,YAAW,KAClBjD,KAAKyC,SACPzC,KAAKwC,iBAENxC,KAAKgD,WAIZE,UACElD,KAAKyC,SAAU,EACXzC,KAAKgD,SAAW,IAClBhD,KAAK6C,MAAQI,YAAW,KAClBjD,KAAKyC,SACPzC,KAAKwC,iBAENxC,KAAKgD,aA7EO5B,KALpBT,EAAQ,CACPC,KAAM,UACNuC,WAAY,QAAEC,EAAQ9C,gBAAAA,GACtB+C,MAAO,CAAC,WAAY,eAEDjC,SAAAA"}