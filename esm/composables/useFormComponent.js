import e from"../node_modules/lodash/isString.js";import o from"../node_modules/lodash/isFunction.js";import r from"../node_modules/lodash/flatten.js";import{ref as l,inject as t,onMounted as a,onUnmounted as u,computed as n}from"vue";import{FormServiceKey as d}from"../components/va-form/consts.js";const s={rules:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},success:{type:Boolean,default:!1},messages:{type:Array,default:()=>[]},error:{type:Boolean,default:!1},errorMessages:{type:[Array,String]},errorCount:{type:Number,default:1},id:{type:[String,Number],default:void 0},name:{type:[String,Number],default:void 0},modelValue:{default:void 0,validator:()=>{throw new Error("ValidateMixin: `modelValue` prop should be defined in component.")}}},i=(r=[],l=null)=>(e(r)&&(r=[r]),r.map((e=>o(e)?e(l):e)));function m(o,s){const m=l(!1),p=l(!1),v=l([]),f=l(!1),h=l(!0),c=t(d,void 0);a((()=>{(null==c?void 0:c.onChildMounted)&&c.onChildMounted(s)})),u((()=>{(null==c?void 0:c.onChildUnmounted)&&c.onChildUnmounted(s)}));const y=()=>(M.value=!1,b.value=[],o.rules&&o.rules.length>0&&i(r(o.rules),o.modelValue).forEach((o=>{e(o)?(b.value.push(o),M.value=!0):!1===o&&(M.value=!0)})),!M.value),g=n((()=>m.value)),M=n({get:()=>o.error||f.value,set(e){f.value=e}}),b=n({get:()=>o.errorMessages?i(o.errorMessages):v.value,set(e){v.value=e}});return{isFocused:p,isFormComponent:h,formProvider:c,validate:y,ValidateMixin_onBlur:()=>{p.value=!1,M.value=!1,y()},shouldValidateOnBlur:g,focus:()=>{throw new Error("focus method should be implemented in the component")},reset:()=>{throw new Error("reset method should be implemented in the component")},resetValidation:()=>{b.value=[],M.value=!1},hasError:()=>M.value,computedError:M,computedErrorMessages:b}}export{m as useFormComponent,s as useFormComponentProps};
//# sourceMappingURL=useFormComponent.js.map
