{"version":3,"file":"cStatefulMixin.js","sources":["../../../../src/mixins/StatefulMixin/cStatefulMixin.ts"],"sourcesContent":["import { ref, computed, toRefs } from 'vue'\n\n/**\n * Returns `valueComputed` that is proxy for `modelValue`\n * if `stateful` prop is `false`\n * Record<any, any> & Record<'modelValue', T>\n */\nexport function useStateful<T> (props: { [key: string]: any, modelValue?: T }, emit: (event: 'update:modelValue', ...args: any[]) => void, defaultValue?: T) {\n  const valueState = ref(defaultValue === undefined ? props.modelValue : defaultValue)\n  const { modelValue } = toRefs(props)\n\n  const valueComputed = computed<T>({\n    get () {\n      if (props.stateful) {\n        return valueState.value as T\n      }\n      return modelValue?.value\n    },\n    set (value: any) {\n      if (props.stateful) {\n        valueState.value = value\n      }\n      emit('update:modelValue', value)\n    },\n  })\n\n  return { valueComputed }\n}\n\n/**\n * Insert this to `@Options`.\n * This will add `modelValue`, `stateful` props and `update:modelValue` emit.\n * If you want to use `modelValue` in your component you provide prop manually.\n *\n * @example\n ```\n  @Options({ name: 'Example', ...statefulComponentOptions })\n  export default class ExampleComponent extends Vue.with(props)\n ```\n */\nexport const statefulComponentOptions = {\n  props: {\n    stateful: {\n      type: Boolean,\n      default: false,\n    },\n    modelValue: {\n      type: undefined,\n      default: undefined,\n    },\n  },\n  emits: ['update:modelValue'] as const,\n}\n"],"names":["useStateful","props","emit","defaultValue","valueState","ref","undefined","modelValue","toRefs","valueComputed","computed","get","stateful","value","set","statefulComponentOptions","type","Boolean","default","emits"],"mappings":"6DAOgBA,EAAgBC,EAA+CC,EAA4DC,GACzI,MAAMC,EAAaC,OAAqBC,IAAjBH,EAA6BF,EAAMM,WAAaJ,IACjEI,WAAEA,GAAeC,EAAOP,GAiB9B,MAAO,CAAEQ,cAfaC,EAAY,CAChCC,IAAG,IACGV,EAAMW,SACDR,EAAWS,MAEbN,MAAAA,SAAAA,EAAYM,MAErBC,IAAKD,GACCZ,EAAMW,WACRR,EAAWS,MAAQA,GAErBX,EAAK,oBAAqBW,aAkBnBE,EAA2B,CACtCd,MAAO,CACLW,SAAU,CACRI,KAAMC,QACNC,SAAS,GAEXX,WAAY,CACVS,UAAMV,EACNY,aAASZ,IAGba,MAAO,CAAC"}