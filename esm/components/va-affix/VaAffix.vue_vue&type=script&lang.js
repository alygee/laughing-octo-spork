import{__decorate as t}from"tslib";import{noop as e}from"lodash-es";import{Vue as s,mixins as i,Options as o,prop as n}from"../../node_modules/vue-class-component/dist/vue-class-component.esm-bundler.js";import{handleThrottledEvent as f,useEventsHandlerWithThrottle as r,getWindowHeight as h}from"./VaAffix-utils.js";const a=s.with(class{constructor(){this.offsetTop=n({type:Number,default:void 0}),this.offsetBottom=n({type:Number,default:void 0}),this.target=n({type:Function,default:()=>()=>window})}});let d=class extends(i(a)){constructor(){super(...arguments),this.state={isTopAffixed:!1,isBottomAffixed:!1},this.clearEventListeners=e}get computedClass(){return[{"va-affix--affixed":this.isAffixed}]}getTargetElement(){const{target:t}=this;return t()}get computedStyle(){const t=t=>{const e=t();if(void 0!==e)return`${e}px`};return{top:this.state.isTopAffixed?t((()=>{const t=this.getTargetElement();if(void 0!==this.offsetTop){if(t!==window){const{top:e}=t.getBoundingClientRect();return e+this.offsetTop}return this.offsetTop}})):null,bottom:this.state.isBottomAffixed?t((()=>{const t=this.getTargetElement();if(void 0!==this.offsetBottom){if(t!==window){const{bottom:e}=t.getBoundingClientRect(),{offsetHeight:s,clientHeight:i}=t,o=s-i;return h()-(e-this.offsetBottom)+o}return this.offsetBottom}})):null,width:`${this.state.width}px`}}get isAffixed(){return this.state.isTopAffixed||this.state.isBottomAffixed}handleThrottledEvent(t,e){const s={...this.$data,...this.$props,element:this.$refs.element,target:this.getTargetElement(),setState:this.setState.bind(this),getState:this.getState.bind(this)};if(t&&"resize"!==t){if(e&&e.target){const i=this.getTargetElement();i===e.target||i===window?f(t,s):this.setState({isBottomAffixed:!1,isTopAffixed:!1})}}else f(t,s)}setState(t){this.state=t,this.$emit("change",this.isAffixed)}getState(){return this.state}mounted(){this.initialPosition=this.$refs.element.getBoundingClientRect(),this.clearEventListeners=r(["scroll","resize"],{handler:this.handleThrottledEvent}),this.$nextTick((()=>{this.handleThrottledEvent(null)}))}beforeUnmount(){this.clearEventListeners()}};d=t([o({name:"VaAffix",emits:["change"]})],d);var l=d;export default l;
//# sourceMappingURL=VaAffix.vue_vue&type=script&lang.js.map
