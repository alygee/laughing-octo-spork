{"version":3,"file":"VaRating.vue_vue&type=template&id=10f2d130&lang.js","sources":["../../../../src/components/va-rating/VaRating.vue?vue&type=template&id=10f2d130&lang.js"],"sourcesContent":["<template>\n  <div\n    class=\"va-rating\"\n    :class=\"classList\"\n  >\n    <div\n      @keyup.left=\"onArrow($event, -1)\"\n      @keyup.right=\"onArrow($event, 1)\"\n      @mouseenter=\"onMouseEnter\"\n      @mouseleave=\"onMouseLeave\"\n      class=\"va-rating__item-wrapper\"\n    >\n      <template\n        v-if=\"$props.numbers\"\n      >\n        <va-rating-item\n          v-for=\"number in $props.max\"\n          :key=\"number\"\n          class=\"va-rating__number-item\"\n          :halves=\"$props.halves\"\n          :hover=\"hoverEnabled\"\n          :size=\"$props.size\"\n          :color=\"$props.color\"\n          :empty-icon-color=\"$props.unselectedColor\"\n          :tabindex=\"tabIndex\"\n          :modelValue=\"getItemValue(number)\"\n          @hover=\"onHover(number, $event)\"\n          @click=\"onItemSelected(number, $event)\"\n        >\n          <template v-slot=\"{ props }\">\n            <button\n              @click=\"props.onClick\"\n              class=\"va-rating__number-item\"\n              tabindex=\"-1\"\n              :style=\" {\n                background: props.value === 0.5\n                  ? `linear-gradient(90deg, ${colorComputed} 50%, ${focusColor} 50%`\n                  : !props.value ? focusColor : colorComputed,\n                color: props.value ? '#fff' : colorComputed,\n                width: sizeComputed,\n                height: sizeComputed,\n                fontSize: fontSizeComputed,\n                borderRadius: `${SizeMixin_fontSize * 0.125}rem`,\n              }\"\n            > {{ number }} </button>\n          </template>\n        </va-rating-item>\n      </template>\n      <template v-else>\n        <va-rating-item\n          v-for=\"itemNumber in $props.max\"\n          :key=\"itemNumber\"\n          :halves=\"$props.halves\"\n          :hover=\"hoverEnabled\"\n          :filled-icon-name=\"$props.icon\"\n          :half-icon-name=\"$props.halfIcon\"\n          :empty-icon-name=\"$props.emptyIcon\"\n          :size=\"$props.size\"\n          :color=\"$props.color\"\n          :empty-icon-color=\"$props.unselectedColor\"\n          :tabindex=\"tabIndex\"\n          :modelValue=\"getItemValue(itemNumber)\"\n          @hover=\"onHover(itemNumber, $event)\"\n          @click=\"onItemSelected(itemNumber, $event)\"\n        />\n      </template>\n    </div>\n    <span class=\"va-rating__text-wrapper\" v-if=\"$props.texts.length === $props.max\" :style=\"{ color: computeColor($props.textColor) }\">\n      {{ $props.texts[Math.round(valueProxy) - 1] }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, mixins, prop, Vue } from 'vue-class-component'\nimport { ColorInput } from 'colortranslator/dist/@types'\n\nimport { getFocusColor } from '../../services/color-config/color-functions'\nimport ColorMixin from '../../services/color-config/ColorMixin'\nimport { StatefulMixin } from '../../mixins/StatefulMixin/StatefulMixin'\nimport { SizeMixin } from '../../mixins/SizeMixin'\nimport VaRatingItem from './VaRatingItem'\nimport { RatingValue } from './VaRating.types'\n\nclass RatingProps {\n  modelValue = prop<number>({ type: Number, default: 0 })\n  icon = prop<string>({ type: String, default: 'star' })\n  halfIcon = prop<string>({ type: String, default: 'star_half' })\n  emptyIcon = prop<string>({ type: String, default: 'star_outline' })\n  readonly = prop<boolean>({ type: Boolean, default: false })\n  disabled = prop<boolean>({ type: Boolean, default: false })\n  numbers = prop<boolean>({ type: Boolean, default: false })\n  halves = prop<boolean>({ type: Boolean, default: false })\n  max = prop<number>({ type: Number, default: 5 })\n  clearable = prop<boolean>({ type: Boolean, default: false })\n  hover = prop<boolean>({ type: Boolean, default: false })\n  texts = prop<any[]>({ type: Array, default: () => [] })\n  textColor = prop<string>({ type: String })\n  unselectedColor = prop<string>({ type: String })\n  color = prop<string>({ type: String, default: 'primary' })\n}\n\nconst RatingPropsMixin = Vue.with(RatingProps)\n\n@Options({\n  name: 'VaRating',\n  components: { VaRatingItem },\n})\nexport default class VaRating extends mixins(\n  ColorMixin,\n  SizeMixin,\n  StatefulMixin,\n  RatingPropsMixin,\n) {\n  isHovered = false\n  forceEmit = false\n  hoveredValue = RatingValue.EMPTY\n\n  mounted () {\n    this.hoveredValue = this.valueComputed\n  }\n\n  get valueProxy (): number {\n    return this.isHovered ? this.hoveredValue : this.valueComputed\n  }\n\n  set valueProxy (value: number) {\n    this.hoveredValue = value\n    if (this.forceEmit) {\n      this.valueComputed = value\n      this.forceEmit = false\n    }\n  }\n\n  get focusColor () {\n    return this.$props.unselectedColor\n      ? this.computeColor(this.$props.unselectedColor)\n      : getFocusColor(this.colorComputed as ColorInput)\n  }\n\n  get classList () {\n    return {\n      'va-rating--disabled': this.$props.disabled,\n      'va-rating--readonly': this.$props.readonly,\n    }\n  }\n\n  get interactionsEnabled () {\n    return !(this.$props.disabled || this.$props.readonly)\n  }\n\n  get hoverEnabled () {\n    return this.$props.hover && this.interactionsEnabled\n  }\n\n  get tabIndex () {\n    return this.interactionsEnabled ? 0 : undefined\n  }\n\n  getItemValue (itemNumber: number): RatingValue {\n    const diff = itemNumber - this.valueProxy\n    switch (true) {\n    case diff <= 0: return RatingValue.FULL\n    case diff === RatingValue.HALF && this.$props.halves: return RatingValue.HALF\n    default: return RatingValue.EMPTY\n    }\n  }\n\n  onHover (itemNumber: number, value: RatingValue): void {\n    this.valueProxy = value === RatingValue.FULL\n      ? itemNumber\n      : itemNumber - RatingValue.HALF\n  }\n\n  onMouseEnter () {\n    this.isHovered = (this.hoverEnabled as boolean) && true\n  }\n\n  onMouseLeave () {\n    this.isHovered = false\n  }\n\n  onArrow (event: KeyboardEvent, directon: 1 | -1) {\n    const currentValue = this.valueProxy || RatingValue.EMPTY\n    const step = this.$props.halves ? RatingValue.HALF : RatingValue.FULL\n    const nextValue = currentValue + (step * directon)\n    if (nextValue < 0 || nextValue > (this.$props.max as number)) { return }\n\n    this.forceEmit = true\n    this.valueProxy = nextValue\n  }\n\n  onItemSelected (itemNumber: number, value: RatingValue) {\n    if (!this.interactionsEnabled) { return }\n    const currentClickedValue = this.$props.halves\n      ? value === RatingValue.HALF ? itemNumber - RatingValue.HALF : itemNumber\n      : itemNumber\n    const valueToEmit = this.$props.clearable && this.valueComputed === currentClickedValue\n      ? RatingValue.EMPTY\n      : currentClickedValue\n\n    this.forceEmit = true\n    this.valueProxy = valueToEmit\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources/resources\";\n@import 'variables';\n\n.va-rating {\n  display: var(--va-rating-display);\n\n  &__number-item {\n    @include normalize-button();\n\n    font-size: var(--va-rating-number-item-font-size);\n    margin: var(--va-rating-number-item-margin);\n    font-weight: var(--va-rating-number-item-font-weight);\n\n    @include flex-center();\n\n    cursor: pointer;\n\n    @at-root {\n      .va-rating--disabled & {\n        @include va-disabled();\n      }\n\n      .va-rating--readonly & {\n        cursor: default;\n      }\n    }\n  }\n\n  &__item-wrapper {\n    display: var(--va-rating-item-wrapper-display);\n    cursor: var(--va-rating-item-wrapper-cursor);\n\n    @at-root {\n      .va-rating--readonly &,\n      .va-rating--disabled & {\n        cursor: default;\n      }\n    }\n  }\n\n  &-item {\n    display: var(--va-rating-item-display);\n\n    @include flex-center();\n\n    .va-rating--disabled & {\n      @include va-disabled();\n\n      &__wrapper {\n        cursor: initial !important;\n      }\n    }\n\n    .va-rating--readonly & &__wrapper {\n      cursor: initial !important;\n    }\n  }\n\n  &__text-wrapper {\n    padding-left: 10px;\n  }\n}\n</style>\n"],"names":["_createBlock","class","_ctx","_createVNode","onKeyup","$event","onMouseenter","onMouseleave","max","number","key","halves","hover","size","color","unselectedColor","tabindex","modelValue","onHover","onClick","props","style","itemNumber","icon","halfIcon","emptyIcon","texts","length","textColor","Math","round"],"mappings":"qPACEA,SACEC,OAAM,YACEC,eAERC,SACGC,2BAAYF,UAAQG,oCACPH,UAAQG,mBACrBC,iCAAYJ,sCACZK,iCAAYL,sCACbD,MAAM,4BAGEC,SAAc,eAEpBF,cACmBE,SAAOM,KAAjBC,QADTT,KAEGU,IAAKD,EACNR,MAAM,yBACLU,OAAQT,SAAOS,OACfC,MAAOV,eACPW,KAAMX,SAAOW,KACbC,MAAOZ,SAAOY,MACd,mBAAkBZ,SAAOa,gBACzBC,SAAUd,WACVe,WAAYf,eAAaO,GACzBS,WAAOhB,UAAQO,EAAQJ,GACvBc,WAAOjB,iBAAeO,EAAQJ,gBAG7B,EADkBe,MAAAA,MAClBjB,YACGgB,QAAOC,EAAMD,QACdlB,MAAM,yBACNe,SAAS,KACRK,sSAUEZ,kJAKTT,cACuBE,SAAOM,KAArBc,QADTtB,KAEGU,IAAKY,EACLX,OAAQT,SAAOS,OACfC,MAAOV,eACP,mBAAkBA,SAAOqB,KACzB,iBAAgBrB,SAAOsB,SACvB,kBAAiBtB,SAAOuB,UACxBZ,KAAMX,SAAOW,KACbC,MAAOZ,SAAOY,MACd,mBAAkBZ,SAAOa,gBACzBC,SAAUd,WACVe,WAAYf,eAAaoB,GACzBJ,WAAOhB,UAAQoB,EAAYjB,GAC3Bc,WAAOjB,iBAAeoB,EAAYjB,iLAIGH,SAAOwB,MAAMC,SAAWzB,SAAOM,SAA3ER,gBAAMC,MAAM,0BAAqEoB,aAAgBnB,eAAaA,SAAO0B,eAChH1B,SAAOwB,MAAMG,KAAKC,MAAM5B"}