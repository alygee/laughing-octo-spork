{"version":3,"file":"platform.js","sources":["../../../../../src/components/va-popup/plugins/platform.ts"],"sourcesContent":["/* eslint-disable */\n// @ts-nocheck\n\nexport const isSSR = typeof window === 'undefined'\nexport let fromSSR = false\nexport let onSSR = isSSR\n\nfunction getMatch (userAgent, platformMatch) {\n  const match = /(edge)\\/([\\w.]+)/.exec(userAgent) ||\n    /(opr)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(vivaldi)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(chrome)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(iemobile)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(version)(applewebkit)[\\/]([\\w.]+).*(safari)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(webkit)[\\/]([\\w.]+).*(version)[\\/]([\\w.]+).*(safari)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(webkit)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(opera)(?:.*version|)[\\/]([\\w.]+)/.exec(userAgent) ||\n    /(msie) ([\\w.]+)/.exec(userAgent) ||\n    userAgent.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(userAgent) ||\n    userAgent.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(userAgent) ||\n    []\n\n  return {\n    browser: match[5] || match[3] || match[1] || '',\n    version: match[2] || match[4] || '0',\n    versionNumber: match[4] || match[2] || '0',\n    platform: platformMatch[0] || '',\n  }\n}\n\nfunction getPlatformMatch (userAgent) {\n  return /(ipad)/.exec(userAgent) ||\n    /(ipod)/.exec(userAgent) ||\n    /(windows phone)/.exec(userAgent) ||\n    /(iphone)/.exec(userAgent) ||\n    /(kindle)/.exec(userAgent) ||\n    /(silk)/.exec(userAgent) ||\n    /(android)/.exec(userAgent) ||\n    /(win)/.exec(userAgent) ||\n    /(mac)/.exec(userAgent) ||\n    /(linux)/.exec(userAgent) ||\n    /(cros)/.exec(userAgent) ||\n    /(playbook)/.exec(userAgent) ||\n    /(bb)/.exec(userAgent) ||\n    /(blackberry)/.exec(userAgent) ||\n    []\n}\n\nfunction getPlatform (userAgent) {\n  userAgent = (userAgent || navigator.userAgent || navigator.vendor || window.opera).toLowerCase()\n\n  const platformMatch = getPlatformMatch(userAgent)\n  const matched = getMatch(userAgent, platformMatch)\n  const browser = {}\n\n  if (matched.browser) {\n    browser[matched.browser] = true\n    browser.version = matched.version\n    browser.versionNumber = parseInt(matched.versionNumber, 10)\n  }\n\n  if (matched.platform) {\n    browser[matched.platform] = true\n  }\n\n  // These are all considered mobile platforms, meaning they run a mobile browser\n  if (browser.android || browser.bb || browser.blackberry || browser.ipad || browser.iphone ||\n    browser.ipod || browser.kindle || browser.playbook || browser.silk || browser['windows phone']) {\n    browser.mobile = true\n  }\n\n  // Set iOS if on iPod, iPad or iPhone\n  if (browser.ipod || browser.ipad || browser.iphone) {\n    browser.ios = true\n  }\n\n  if (browser['windows phone']) {\n    browser.winphone = true\n    delete browser['windows phone']\n  }\n\n  // These are all considered desktop platforms, meaning they run a desktop browser\n  if (browser.cros || browser.mac || browser.linux || browser.win) {\n    browser.desktop = true\n  }\n\n  // Chrome, Opera 15+, Vivaldi and Safari are webkit based browsers\n  if (browser.chrome || browser.opr || browser.safari || browser.vivaldi) {\n    browser.webkit = true\n  }\n\n  // IE11 has a new token so we will assign it msie to avoid breaking changes\n  if (browser.rv || browser.iemobile) {\n    matched.browser = 'ie'\n    browser.ie = true\n  }\n\n  // Edge is officially known as Microsoft Edge, so rewrite the key to match\n  if (browser.edge) {\n    matched.browser = 'edge'\n    browser.edge = true\n  }\n\n  // Blackberry browsers are marked as Safari on BlackBerry\n  if (browser.safari && browser.blackberry || browser.bb) {\n    matched.browser = 'blackberry'\n    browser.blackberry = true\n  }\n\n  // Playbook browsers are marked as Safari on Playbook\n  if (browser.safari && browser.playbook) {\n    matched.browser = 'playbook'\n    browser.playbook = true\n  }\n\n  // Opera 15+ are identified as opr\n  if (browser.opr) {\n    matched.browser = 'opera'\n    browser.opera = true\n  }\n\n  // Stock Android browsers are marked as Safari on Android.\n  if (browser.safari && browser.android) {\n    matched.browser = 'android'\n    browser.android = true\n  }\n\n  // Kindle browsers are marked as Safari on Kindle\n  if (browser.safari && browser.kindle) {\n    matched.browser = 'kindle'\n    browser.kindle = true\n  }\n\n  // Kindle Silk browsers are marked as Safari on Kindle\n  if (browser.safari && browser.silk) {\n    matched.browser = 'silk'\n    browser.silk = true\n  }\n\n  if (browser.vivaldi) {\n    matched.browser = 'vivaldi'\n    browser.vivaldi = true\n  }\n\n  // Assign the name and platform variable\n  browser.name = matched.browser\n  browser.platform = matched.platform\n\n  if (!isSSR) {\n    if (window.process && window.process.versions && window.process.versions.electron) {\n      browser.electron = true\n    } else if (document.location.href.indexOf('chrome-extension://') === 0) {\n      browser.chromeExt = true\n    } else if (window._cordovaNative || window.cordova) {\n      browser.cordova = true\n    }\n\n    fromSSR = browser.cordova === void 0 &&\n      browser.electron === void 0 &&\n      !!document.querySelector('[data-server-rendered]')\n\n    fromSSR && (onSSR = true)\n  }\n\n  return browser\n}\n\nlet webStorage\n\nexport function hasWebStorage () {\n  if (webStorage !== void 0) {\n    return webStorage\n  }\n\n  try {\n    if (window.localStorage) {\n      webStorage = true\n      return true\n    }\n  } catch (e) {\n  }\n\n  webStorage = false\n  return false\n}\n\nfunction getClientProperties () {\n  return {\n    has: {\n      touch: (() => !!('ontouchstart' in document.documentElement) || window.navigator.msMaxTouchPoints > 0)(),\n      webStorage: hasWebStorage(),\n    },\n    within: {\n      iframe: window.self !== window.top,\n    },\n  }\n}\n\nexport default {\n  has: {\n    touch: false,\n    webStorage: false,\n  },\n  parseSSR (/* ssrContext */ ssr) {\n    return ssr ? {\n      is: getPlatform(ssr.req.headers['user-agent']),\n      has: this.has,\n      within: this.within,\n    } : {\n      is: getPlatform(),\n      ...getClientProperties(),\n    }\n  },\n\n  install ($q, queues, Vue) {\n    if (isSSR) {\n      queues.server.push((q, ctx) => {\n        q.platform = this.parseSSR(ctx.ssr)\n      })\n      return\n    }\n\n    this.is = getPlatform()\n\n    if (fromSSR) {\n      queues.takeover.push(q => {\n        onSSR = fromSSR = false\n        Object.assign(q.platform, getClientProperties())\n      })\n      Vue.util.defineReactive($q, 'platform', this)\n    } else {\n      Object.assign(this, getClientProperties())\n      $q.platform = this\n    }\n  },\n}\n"],"names":["isSSR","window","webStorage","fromSSR","getPlatform","userAgent","matched","platformMatch","match","exec","indexOf","browser","version","versionNumber","platform","getMatch","navigator","vendor","opera","toLowerCase","getPlatformMatch","parseInt","android","bb","blackberry","ipad","iphone","ipod","kindle","playbook","silk","mobile","ios","winphone","cros","mac","linux","win","desktop","chrome","opr","safari","vivaldi","webkit","rv","iemobile","ie","edge","name","process","versions","electron","document","location","href","chromeExt","_cordovaNative","cordova","querySelector","hasWebStorage","localStorage","e","getClientProperties","has","touch","documentElement","msMaxTouchPoints","within","iframe","self","top","parseSSR","ssr","is","req","headers","this","install","$q","queues","Vue","server","push","q","ctx","takeover","Object","assign","util","defineReactive"],"mappings":"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"}