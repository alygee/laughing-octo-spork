import e from"./VaToast.js";import{createVNode as o,render as t}from"vue";let n=1,l=[];const r=e=>{var o,t;return null===(t=null===(o=e.component)||void 0===o?void 0:o.proxy)||void 0===t?void 0:t.computedProps},s=(e,o)=>{var t;if(!e)return;if(!l.length)return void(n=1);const s=l.findIndex((o=>o===e));if(s<0)return;const i=r(e),{offsetX:f,offsetY:d,position:c}=i,p=null===(t=e.el)||void 0===t?void 0:t.offsetHeight;o(),l=l.reduce(((o,t,n)=>{if(t===e)return o;if(t.component){const{offsetX:e,offsetY:o,position:l}=r(t);if(n>s&&f===e&&d===o&&c===l&&t.el&&p){const[e,o]=t.el.style.transform.match(/[\d-]+(?=px)/g),n=((e,o,t)=>{const n=t.includes("bottom")?-1:1;return parseInt(e,10)-(o+5)*n})(o,p,l);t.el.style.transform=`translate(0, ${n}px)`}}return[...o,t]}),[]),l.length||(n=1)},i=(e,{props:n,children:l,element:r,app:i}={})=>{let f,d=r;return f=o(e,{...n,onClose:()=>{s(f,(()=>((e,o)=>{e&&(t(null,e),e.remove()),e=null})(d))),(null==n?void 0:n.onClose)&&n.onClose()}},l),(null==i?void 0:i._context)&&(f.appContext=i._context),d?t(f,d):"undefined"!=typeof document&&t(f,d=document.createElement("div")),{vNode:f,el:d}},f=e=>("string"==typeof e&&(e={message:e}),((e,...o)=>(o.forEach((o=>{if("object"==typeof o)for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];void 0!==n&&(e[t]=n)}})),e))({},e)),d=(o,t)=>{const s=((o,t)=>{const{vNode:s,el:f}=i(e,{app:t,props:o}),d=r(s);if(f&&s.el&&d){document.body.appendChild(f);const{offsetX:e,offsetY:o,position:t}=d;s.el.style.display="flex",s.el.id="notification_"+n,s.el.style.zIndex="100";let i=0;return l.filter((n=>{const{offsetX:l,offsetY:s,position:i}=r(n);return l===e&&s===o&&t===i})).forEach((e=>{i+=((e,o)=>{if(e.el){const t=o.includes("bottom")?-1:1;return(e.el.offsetHeight+5)*t}return 0})(e,t)})),s.el.style.transform=`translate(0, ${i}px)`,n+=1,s}return null})(f(o),t);return s&&l.push(s),s};export default class{constructor(e){this.app=e}init(e){var o,t;return null===(t=null===(o=d(e,this.app))||void 0===o?void 0:o.el)||void 0===t?void 0:t.id}close(e){(e=>{const o=l.find((o=>{var t;return(null===(t=o.el)||void 0===t?void 0:t.id)===e}));o&&r(o).onClose()})(e)}closeAll(){l.length?l.forEach((e=>r(e).onClose())):n=1}}
//# sourceMappingURL=index.js.map
