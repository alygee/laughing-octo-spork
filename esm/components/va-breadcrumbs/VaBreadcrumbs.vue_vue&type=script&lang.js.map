{"version":3,"file":"VaBreadcrumbs.vue_vue&type=script&lang.js","sources":["../../../../src/components/va-breadcrumbs/VaBreadcrumbs.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { VNode, h, Fragment } from 'vue'\nimport { Options, prop, Vue, mixins } from 'vue-class-component'\n\nimport { hasOwnProperty } from '../../services/utils'\nimport ColorMixin from '../../services/color-config/ColorMixin'\nimport { AlignMixin } from '../../mixins/AlignMixin'\n\nclass BreadcrumbsProps {\n  separator = prop<string>({ type: String, default: '/' })\n  color = prop<string>({ type: String, default: 'gray' })\n  activeColor = prop<string>({ type: String, default: null })\n  separatorColor = prop<string>({ type: String, default: null })\n}\n\nconst BreadcrumbsPropsMixin = Vue.with(BreadcrumbsProps)\n\n@Options({\n  name: 'VaBreadcrumbs',\n})\nexport default class VaBreadcrumbs extends mixins(\n  ColorMixin,\n  AlignMixin,\n  BreadcrumbsPropsMixin,\n) {\n  get computedStyles () {\n    return this.alignComputed\n  }\n\n  get computedThemesSeparatorColor () {\n    return this.separatorColor ? this.computeColor(this.separatorColor) : this.colorComputed\n  }\n\n  get computedThemesActiveColor () {\n    return this.activeColor ? this.computeColor(this.activeColor) : this.colorComputed\n  }\n\n  render () {\n    // TODO: use provide/inject for this not to stick to component's name\n    const childNodeFilter = (result: VNode[], node?: VNode) => {\n      const nodes = node && node.type === Fragment && node.children ? node.children as VNode[] : [node]\n\n      return [\n        ...result,\n        ...nodes.filter((node?: VNode) => !!(node?.type as any)?.name?.match(/VaBreadcrumbsItem$/)),\n      ]\n    }\n\n    const childNodes = (this.$slots as any)?.default()?.reduce(childNodeFilter, []) || []\n\n    const childNodesLength = childNodes.length\n    const isLastIndexChildNodes = (index: number) => index === childNodesLength - 1\n\n    const createSeparatorComponent = () => {\n      // Temp fix for https://github.com/vuejs/vue-next/issues/3666. Move `separatorNode` outside this method.\n      const separatorNode = (this.$slots.separator ? this.$slots.separator() : 0) || [this.separator]\n\n      return h(\n        'span',\n        {\n          class: ['va-breadcrumbs__separator'],\n          style: [{ color: this.computedThemesSeparatorColor }],\n        },\n        separatorNode,\n      )\n    }\n\n    const isDisabledChild = (child: VNode) => {\n      const childPropData = child?.props\n      if (!childPropData || !hasOwnProperty(childPropData, 'disabled')) {\n        return false\n      }\n\n      if (childPropData.disabled === '') { // NOTE: by default empty attribute is ''\n        return true\n      }\n\n      return Boolean(childPropData.disabled)\n    }\n\n    const createChildComponent = (child: VNode, index: number) => h(\n      'span', {\n        class: 'va-breadcrumbs__item',\n        style: {\n          color: (!isLastIndexChildNodes(index) && !isDisabledChild(child)) ? this.computedThemesActiveColor : null,\n        },\n      },\n      [child],\n    )\n\n    const children = [] as VNode[]\n\n    if (childNodesLength) {\n      childNodes.forEach((child: VNode, index: number) => {\n        children.push(createChildComponent(child, index))\n\n        if (!isLastIndexChildNodes(index)) {\n          children.push(createSeparatorComponent())\n        }\n      })\n    }\n\n    return h('div', {\n      class: 'va-breadcrumbs',\n      style: { ...this.computedStyles },\n    }, children)\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-breadcrumbs {\n  display: var(--va-breadcrumbs-display);\n  width: var(--va-breadcrumbs-width);\n  justify-content: var(--va-breadcrumbs-justify-content);\n\n  &__item {\n    display: var(--va-breadcrumbs-item-display);\n  }\n\n  &__separator {\n    padding: var(--va-breadcrumbs-separator-padding);\n    display: var(--va-breadcrumbs-separator-display);\n  }\n}\n\n</style>\n"],"names":["BreadcrumbsPropsMixin","Vue","with","constructor","this","prop","type","String","default","VaBreadcrumbs","mixins","ColorMixin","AlignMixin","computedStyles","alignComputed","computedThemesSeparatorColor","separatorColor","computeColor","colorComputed","computedThemesActiveColor","activeColor","render","childNodes","$slots","reduce","result","node","Fragment","children","filter","name","match","childNodesLength","length","isLastIndexChildNodes","index","createSeparatorComponent","separatorNode","separator","h","class","style","color","isDisabledChild","child","childPropData","props","hasOwnProperty","disabled","Boolean","createChildComponent","forEach","push","Options"],"mappings":"2XAeA,MAAMA,EAAwBC,EAAIC,KAPlC,MAAAC,cACEC,eAAYC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,MAClDJ,WAAQC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,SAC9CJ,iBAAcC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,OACpDJ,oBAAiBC,EAAa,CAAEC,KAAMC,OAAQC,QAAS,UAQzD,IAAqBC,EAArB,cAA2CC,EACzCC,EACAC,EACAZ,IAEAa,qBACE,OAAOT,KAAKU,cAGdC,mCACE,OAAOX,KAAKY,eAAiBZ,KAAKa,aAAab,KAAKY,gBAAkBZ,KAAKc,cAG7EC,gCACE,OAAOf,KAAKgB,YAAchB,KAAKa,aAAab,KAAKgB,aAAehB,KAAKc,cAGvEG,iBAEE,MASMC,uBAAclB,KAAKmB,6BAAgBf,gCAAWgB,QAT5B,CAACC,EAAiBC,IAGjC,IACFD,MAHSC,GAAQA,EAAKpB,OAASqB,GAAYD,EAAKE,SAAWF,EAAKE,SAAsB,CAACF,IAIjFG,QAAQH,YAAiB,6BAAGA,MAAAA,SAAAA,EAAMpB,2BAAcwB,2BAAMC,MAAM,4BAIG,MAAO,GAE7EC,EAAmBV,EAAWW,OAC9BC,EAAyBC,GAAkBA,IAAUH,EAAmB,EAExEI,EAA2B,KAE/B,MAAMC,GAAiBjC,KAAKmB,OAAOe,UAAYlC,KAAKmB,OAAOe,YAAc,IAAM,CAAClC,KAAKkC,WAErF,OAAOC,EACL,OACA,CACEC,MAAO,CAAC,6BACRC,MAAO,CAAC,CAAEC,MAAOtC,KAAKW,gCAExBsB,IAIEM,EAAmBC,IACvB,MAAMC,EAAgBD,MAAAA,SAAAA,EAAOE,MAC7B,SAAKD,IAAkBE,EAAeF,EAAe,eAItB,KAA3BA,EAAcG,UAIXC,QAAQJ,EAAcG,YAGzBE,EAAuB,CAACN,EAAcT,IAAkBI,EAC5D,OAAQ,CACNC,MAAO,uBACPC,MAAO,CACLC,MAASR,EAAsBC,IAAWQ,EAAgBC,GAA2C,KAAjCxC,KAAKe,4BAG7E,CAACyB,IAGGhB,EAAW,GAYjB,OAVII,GACFV,EAAW6B,SAAQ,CAACP,EAAcT,KAChCP,EAASwB,KAAKF,EAAqBN,EAAOT,IAErCD,EAAsBC,IACzBP,EAASwB,KAAKhB,QAKbG,EAAE,MAAO,CACdC,MAAO,iBACPC,MAAO,IAAKrC,KAAKS,iBAChBe,KArFcnB,KAHpB4C,EAAQ,CACPvB,KAAM,mBAEarB,SAAAA"}