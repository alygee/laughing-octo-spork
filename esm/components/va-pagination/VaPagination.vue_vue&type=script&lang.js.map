{"version":3,"file":"VaPagination.vue_vue&type=script&lang.js","sources":["../../../../src/components/va-pagination/VaPagination.vue"],"sourcesContent":["<template>\n  <va-button-group\n    v-if=\"showPagination\"\n    class=\"va-pagination\"\n    :flat=\"$props.flat\"\n    :size=\"$props.size\"\n    :color=\"$props.color\"\n    outline\n  >\n    <va-button\n      v-if=\"showBoundaryLinks\"\n      :disabled=\"$props.disabled || currentValue === 1\"\n      :icon=\"$props.boundaryIconLeft\"\n      @click=\"onUserInput(1)\"\n    />\n    <va-button\n      v-if=\"showDirectionLinks\"\n      outline\n      :disabled=\"$props.disabled || currentValue === 1\"\n      :icon=\"$props.directionIconLeft\"\n      @click=\"onUserInput(currentValue - 1)\"\n    />\n    <slot v-if=\"!$props.input\">\n      <va-button\n        :style=\"activeButtonStyle(n)\"\n        outline\n        v-for=\"(n, key) in paginationRange\"\n        :key=\"key\"\n        :disabled=\"$props.disabled || n === '...'\"\n        :class=\"{\n          'va-button--ellipsis': n === '...',\n        }\"\n\n        @click=\"onUserInput(n)\"\n      >\n        {{ n }}\n      </va-button>\n    </slot>\n    <input\n      v-else\n      ref=\"htmlInput\"\n      class=\"va-pagination__input va-button\"\n      :style=\"{\n        cursor: 'default',\n        color: computeColor($props.color),\n        opacity: $props.disabled ? 0.4 : 1\n      }\"\n      :class=\"{ 'va-pagination__input--flat': $props.flat }\"\n      @keydown.enter=\"changeValue\"\n      @focus=\"focusInput\"\n      @blur=\"changeValue\"\n      :disabled=\"$props.disabled\"\n      :placeholder=\"`${currentValue}/${lastPage}`\"\n      v-model=\"inputValue\"\n    />\n    <va-button\n      v-if=\"showDirectionLinks\"\n      outline\n      :disabled=\"$props.disabled || currentValue === lastPage\"\n      :icon=\"$props.directionIconRight\"\n      @click=\"onUserInput(currentValue + 1)\"\n    />\n    <va-button\n      v-if=\"showBoundaryLinks\"\n      outline\n      :disabled=\"$props.disabled || currentValue === lastPage\"\n      :icon=\"$props.boundaryIconRight\"\n      @click=\"onUserInput(lastPage)\"\n    />\n  </va-button-group>\n</template>\n\n<script lang=\"ts\">\nimport { watch } from 'vue'\nimport { Options, mixins, prop, Vue } from 'vue-class-component'\n\nimport { Ref } from '../../utils/decorators'\nimport ColorMixin from '../../services/color-config/ColorMixin'\nimport { StatefulMixin } from '../../mixins/StatefulMixin/StatefulMixin'\nimport VaButtonGroup from '../va-button-group'\nimport VaButton from '../va-button'\nimport VaInput from '../va-input'\n\nimport { setPaginationRange } from './setPaginationRange'\n\nclass PaginationProps {\n  modelValue = prop<number>({ type: Number, default: 1 })\n  visiblePages = prop<number>({ type: Number, default: 0 })\n  pages = prop<number>({ type: Number, default: 0 })\n  disabled = prop<boolean>({ type: Boolean, default: false })\n  color = prop<string>({ type: String, default: 'primary' })\n  size = prop<string>({\n    type: String,\n    default: 'medium',\n    validator: (v: string) => ['medium', 'small', 'large'].includes(v),\n  })\n\n  boundaryLinks = prop<boolean>({ type: Boolean, default: true })\n  boundaryNumbers = prop<boolean>({ type: Boolean, default: false })\n  directionLinks = prop<boolean>({ type: Boolean, default: true })\n  input = prop<boolean>({ type: Boolean, default: false })\n  hideOnSinglePage = prop<boolean>({ type: Boolean, default: false })\n  flat = prop<boolean>({ type: Boolean, default: false })\n  total = prop<number>({ type: Number, default: null })\n  pageSize = prop<number>({ type: Number, default: null })\n  boundaryIconLeft = prop<string>({ type: String, default: 'first_page' })\n  boundaryIconRight = prop<string>({ type: String, default: 'last_page' })\n  directionIconLeft = prop<string>({ type: String, default: 'chevron_left' })\n  directionIconRight = prop<string>({ type: String, default: 'chevron_right' })\n}\n\nconst PaginationPropsMixin = Vue.with(PaginationProps)\n\n@Options({\n  name: 'VaPagination',\n  components: {\n    VaButtonGroup,\n    VaButton,\n    VaInput,\n  },\n})\nexport default class VaPagination extends mixins(\n  StatefulMixin,\n  ColorMixin,\n  PaginationPropsMixin,\n) {\n  inputValue = ''\n\n  @Ref() readonly htmlInput!: HTMLInputElement\n\n  created () {\n    watch([() => this.useTotal, () => this.$props.pages], () => {\n      if (this.useTotal && this.$props.pages) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('Please, use either `total` and `page-size` props, or `pages`.')\n        }\n      }\n    })\n  }\n\n  get lastPage (): number {\n    const { total, pageSize, pages } = this.$props\n    return this.useTotal\n      ? Math.ceil((total as number) / (pageSize as number)) || 1\n      : pages as number\n  }\n\n  get paginationRange () {\n    const { visiblePages, total, pageSize, boundaryNumbers, pages } = this.$props\n    const value = this.currentValue || 1\n    const totalPages = this.useTotal ? Math.ceil((total as number) / (pageSize as number)) : pages\n    return setPaginationRange(value, visiblePages as number, totalPages as number, boundaryNumbers)\n  }\n\n  get showBoundaryLinks () {\n    const { visiblePages, boundaryLinks, boundaryNumbers, input } = this.$props\n    return input ||\n      ((visiblePages && this.lastPage > visiblePages) && boundaryLinks && !boundaryNumbers)\n  }\n\n  get showDirectionLinks () {\n    const { visiblePages, directionLinks, input } = this.$props\n    return input || ((visiblePages && this.lastPage > visiblePages) && directionLinks)\n  }\n\n  get showPagination () {\n    return this.lastPage > 1 || (!this.$props.hideOnSinglePage && this.lastPage <= 1)\n  }\n\n  get fontColor () {\n    return this.computeColor(this.$props.color as string)\n  }\n\n  get useTotal () {\n    const { total, pageSize } = this.$props\n    return !!((total || total === 0) && pageSize)\n  }\n\n  get currentValue () {\n    if (this.useTotal) {\n      return Math.ceil(this.valueComputed / (this.$props.pageSize as number)) || 1\n    } else {\n      return this.valueComputed\n    }\n  }\n\n  set currentValue (value) {\n    this.valueComputed = value\n  }\n\n  focusInput () {\n    const { currentValue, $nextTick } = this\n    this.inputValue = currentValue\n    $nextTick(() => this.htmlInput.setSelectionRange(0, this.htmlInput.value.length))\n  }\n\n  onUserInput (pageNum: number) {\n    if (pageNum < 1 || pageNum > this.lastPage) {\n      return\n    }\n    this.currentValue = this.useTotal\n      ? (pageNum - 1) * (this.$props.pageSize as number) + 1\n      : pageNum\n  }\n\n  resetInput () {\n    this.inputValue = ''\n    this.htmlInput.blur()\n  }\n\n  changeValue () {\n    if (this.inputValue === this.currentValue) { this.resetInput() }\n    if (!this.inputValue.length) { return }\n    let pageNum = Number.parseInt(this.inputValue)\n    switch (true) {\n    case pageNum < 1:\n      pageNum = 1\n      break\n    case pageNum > this.lastPage:\n      pageNum = this.lastPage\n      break\n    case isNaN(pageNum):\n      pageNum = this.currentValue\n      break\n    default:\n      break\n    }\n    this.onUserInput(pageNum)\n    this.resetInput()\n  }\n\n  activeButtonStyle (buttonValue: number) {\n    if (buttonValue === this.currentValue) {\n      return {\n        backgroundColor: this.colorComputed,\n        color: '#ffffff',\n      }\n    }\n    return {\n      color: this.fontColor,\n    }\n  }\n}\n</script>\n\n<style lang='scss'>\n@import \"../../styles/resources/resources\";\n@import 'variables';\n\n.va-pagination {\n  &__input {\n    border-style: var(--va-pagination-input-border-style);\n    border-width: var(--va-pagination-input-border-width);\n    text-align: var(--va-pagination-input-text-align);\n    font-size: var(--va-pagination-input-font-size);\n\n    &--flat {\n      border-top-width: var(--va-pagination-input-flat-border-top-width);\n    }\n  }\n\n  .va-button {\n    &.va-input {\n      cursor: default;\n    }\n\n    &--ellipsis {\n      cursor: default;\n      opacity: 1;\n    }\n\n    &--ellipsis > .va-button__content {\n      opacity: 0.4;\n    }\n  }\n}\n</style>\n"],"names":["PaginationPropsMixin","Vue","with","constructor","this","prop","type","Number","default","Boolean","String","validator","v","includes","VaPagination","mixins","StatefulMixin","ColorMixin","created","watch","useTotal","$props","pages","process","env","NODE_ENV","Error","lastPage","total","pageSize","Math","ceil","paginationRange","visiblePages","boundaryNumbers","value","currentValue","totalPages","setPaginationRange","showBoundaryLinks","boundaryLinks","input","showDirectionLinks","directionLinks","showPagination","hideOnSinglePage","fontColor","computeColor","color","valueComputed","focusInput","$nextTick","inputValue","htmlInput","setSelectionRange","length","onUserInput","pageNum","resetInput","blur","changeValue","parseInt","isNaN","activeButtonStyle","buttonValue","backgroundColor","colorComputed","__decorate","Ref","HTMLInputElement","Options","name","components","VaButtonGroup","VaButton","VaInput"],"mappings":"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"}