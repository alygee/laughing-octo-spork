{"version":3,"file":"VaTreeCategory.vue_vue&type=script&lang.js","sources":["../../../../../src/components/va-tree-view/VaTreeCategory/VaTreeCategory.vue"],"sourcesContent":["<template>\n  <div class=\"va-tree-category\">\n    <div\n      class=\"va-tree-category__header\"\n      @click=\"toggle\"\n    >\n      <div class=\"va-tree-category__header-switcher\">\n        <square-with-icon\n          :icon=\"isOpenCached ? 'remove' : 'add'\"\n          :color=\"setupContext.treeRoot.color || colorComputed\"\n        />\n      </div>\n      <div\n        class=\"va-tree-category__header-checkbox\"\n        v-if=\"$slots.checkbox\"\n      >\n        <slot name=\"checkbox\" />\n      </div>\n      <div\n        class=\"va-tree-category__header-icon\"\n        v-if=\"$props.icon\"\n      >\n        <va-icon\n          :name=\"$props.icon\"\n          :color=\"theme.getColor('info')\"\n        />\n      </div>\n      <div class=\"va-tree-category__header-label\">\n        {{ $props.label }}\n      </div>\n    </div>\n\n    <div\n      class=\"va-tree-category__list-container\"\n      v-if=\"isOpenCached\"\n    >\n      <div class=\"va-tree-category__list-internal-container\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { provide, inject, watch, ComponentPublicInstance, ref } from 'vue'\nimport { Options, Vue, mixins, prop, setup } from 'vue-class-component'\n\nimport ColorMixin from '../../../services/color-config/ColorMixin'\nimport SquareWithIcon from '../SquareWithIcon'\nimport VaIcon from '../../va-icon'\nimport VaTreeNode from '../VaTreeNode/VaTreeNode.vue'\n\nclass TreeCategoryProps {\n  label = prop<string | number>({ default: '', type: [String, Number] })\n  isOpen = prop<boolean>(Boolean)\n  icon = prop<string>({ default: '', type: String })\n  color = prop<string>({ type: String, default: 'primary' })\n}\n\nconst TreeCategoryPropsMixin = Vue.with(TreeCategoryProps)\n\n@Options({\n  name: 'VaTreeCategory',\n  components: { VaIcon, SquareWithIcon },\n})\nexport default class VaTreeCategory extends mixins(\n  ColorMixin,\n  TreeCategoryPropsMixin,\n) {\n  isOpenCached: boolean | undefined = false\n\n  setupContext = setup(() => {\n    const nodes = ref<(VaTreeCategory | VaTreeNode)[]>([])\n\n    const onChildMounted = (node: VaTreeCategory | VaTreeNode) => {\n      nodes.value.push(node)\n    }\n\n    const onChildUnmounted = (removableNode: VaTreeCategory | VaTreeNode) => {\n      nodes.value = nodes.value.filter((node: VaTreeCategory | VaTreeNode) => node !== removableNode)\n    }\n\n    const treeCategory = {\n      onChildMounted,\n      onChildUnmounted,\n    }\n\n    provide('treeCategory', treeCategory)\n\n    const treeRoot = inject('treeRoot', {\n      onChildMounted: (value: any) => undefined,\n      onChildUnmounted: (value: any) => undefined,\n    })\n\n    return {\n      treeCategory,\n      treeRoot,\n      nodes,\n    }\n  })\n\n  created () {\n    watch(\n      () => this.$props.isOpen,\n      (isOpen) => {\n        this.isOpenCached = isOpen\n      },\n      { immediate: true })\n  }\n\n  collapse () {\n    this.isOpenCached = false\n    this.$nextTick(() => {\n      this.setupContext.nodes.forEach((child: ComponentPublicInstance) => {\n        if (child.$options.name === 'va-tree-category') {\n          (child as VaTreeCategory).collapse()\n        }\n      })\n    })\n  }\n\n  expand () {\n    this.isOpenCached = true\n    this.$nextTick(() => {\n      this.setupContext.nodes.forEach((child: VaTreeCategory | VaTreeNode) => {\n        if (child instanceof VaTreeCategory) {\n          child.expand()\n        }\n      })\n    })\n  }\n\n  toggle (e: MouseEvent) {\n    if (!(e.target as HTMLElement).classList.contains('va-checkbox__input')) {\n      this.isOpenCached = !this.isOpenCached\n    }\n  }\n\n  mounted () {\n    if (this.setupContext.treeRoot) {\n      this.setupContext.treeRoot.onChildMounted(this)\n    }\n  }\n\n  beforeUnmount () {\n    if (this.setupContext.treeRoot) {\n      this.setupContext.treeRoot.onChildUnmounted(this)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../../styles/resources/resources\";\n@import 'variables';\n\n.va-tree-category {\n  &__header {\n    cursor: var(--va-tree-category-header-cursor);\n    display: var(--va-tree-category-header-display);\n    align-items: var(--va-tree-category-header-align-items);\n  }\n\n  &__header-switcher {\n    margin-right: 0.5rem;\n  }\n\n  &__header-checkbox {\n    margin-right: var(--va-tree-category-header-checkbox-margin-right);\n    height: var(--va-tree-category-header-checkbox-height);\n    width: var(--va-tree-category-header-checkbox-width);\n    display: var(--va-tree-category-header-checkbox-display);\n    align-items: var(--va-tree-category-header-checkbox-align-items);\n    justify-content: var(--va-tree-category-header-checkbox-justify-content);\n\n    .va-checkbox__square {\n      width: 1.5rem;\n      height: 1.5rem;\n      flex: 0 0 1.5rem;\n    }\n  }\n\n  &__header-icon {\n    color: var(--va-tree-category-header-icon-color);\n    margin-right: var(--va-tree-category-header-icon-margin-right);\n    font-size: var(--va-tree-category-header-icon-font-size);\n    line-height: var(--va-tree-category-header-icon-line-height);\n  }\n\n  &__header-label {\n    word-wrap: var(--va-tree-category-header-label-word-wrap);\n    overflow: var(--va-tree-category-header-label-overflow);\n  }\n\n  &__list-container {\n    margin-top: var(--va-tree-category-list-container-margin-top);\n    padding-left: var(--va-tree-category-list-container-padding-left);\n  }\n\n  &__list-internal-container {\n    background-image: linear-gradient(#adb3b9 33%, rgba(255, 255, 255, 0) 0%);\n    background-position: left;\n    background-size: 1px 3px;\n    background-repeat: repeat-y;\n    padding-left: 1.1875rem;\n  }\n\n  & + .va-tree-category,\n  .va-tree-node + .va-tree-node,\n  .va-tree-category + .va-tree-node,\n  .va-tree-node + .va-tree-category {\n    margin-top: 0.75rem;\n  }\n}\n</style>\n"],"names":["TreeCategoryPropsMixin","Vue","with","constructor","this","prop","default","type","String","Number","Boolean","VaTreeCategory","mixins","ColorMixin","setup","nodes","ref","treeCategory","onChildMounted","node","value","push","onChildUnmounted","removableNode","filter","provide","treeRoot","inject","created","watch","$props","isOpen","isOpenCached","immediate","collapse","$nextTick","setupContext","forEach","child","$options","name","expand","VaTreeCategory_1","toggle","e","target","classList","contains","mounted","beforeUnmount","Options","components","VaIcon","SquareWithIcon"],"mappings":"yYA2DA,MAAMA,EAAyBC,EAAIC,KAPnC,MAAAC,cACEC,WAAQC,EAAsB,CAAEC,QAAS,GAAIC,KAAM,CAACC,OAAQC,UAC5DL,YAASC,EAAcK,SACvBN,UAAOC,EAAa,CAAEC,QAAS,GAAIC,KAAMC,SACzCJ,WAAQC,EAAa,CAAEE,KAAMC,OAAQF,QAAS,eAShD,IAAqBK,IAArB,cAA4CC,EAC1CC,EACAb,IAFFG,kCAIEC,mBAAoC,EAEpCA,kBAAeU,GAAM,KACnB,MAAMC,EAAQC,EAAqC,IAU7CC,EAAe,CACnBC,eATsBC,IACtBJ,EAAMK,MAAMC,KAAKF,IASjBG,iBANwBC,IACxBR,EAAMK,MAAQL,EAAMK,MAAMI,QAAQL,GAAsCA,IAASI,MAQnFE,EAAQ,eAAgBR,GAOxB,MAAO,CACLA,aAAAA,EACAS,SAPeC,EAAO,WAAY,CAClCT,eAAiBE,MACjBE,iBAAmBF,QAMnBL,MAAAA,MAIJa,UACEC,GACE,IAAMzB,KAAK0B,OAAOC,SACjBA,IACC3B,KAAK4B,aAAeD,IAEtB,CAAEE,WAAW,IAGjBC,WACE9B,KAAK4B,cAAe,EACpB5B,KAAK+B,WAAU,KACb/B,KAAKgC,aAAarB,MAAMsB,SAASC,IACH,qBAAxBA,EAAMC,SAASC,MAChBF,EAAyBJ,iBAMlCO,SACErC,KAAK4B,cAAe,EACpB5B,KAAK+B,WAAU,KACb/B,KAAKgC,aAAarB,MAAMsB,SAASC,IAC3BA,aAAiBI,GACnBJ,EAAMG,eAMdE,OAAQC,GACAA,EAAEC,OAAuBC,UAAUC,SAAS,wBAChD3C,KAAK4B,cAAgB5B,KAAK4B,cAI9BgB,UACM5C,KAAKgC,aAAaV,UACpBtB,KAAKgC,aAAaV,SAASR,eAAed,MAI9C6C,gBACM7C,KAAKgC,aAAaV,UACpBtB,KAAKgC,aAAaV,SAASJ,iBAAiBlB,QAjF7BO,OAJpBuC,EAAQ,CACPV,KAAM,iBACNW,WAAY,CAAEC,OAAAA,EAAQC,eAAAA,MAEH1C,SAAAA"}