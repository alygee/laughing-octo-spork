{"version":3,"file":"range-model-value-guard.js","sources":["../../../../../src/components/va-date-input/hooks/range-model-value-guard.ts"],"sourcesContent":["import { computed, ref, Ref, watch } from 'vue'\nimport { isRange } from '../../va-date-picker/hooks/model-value-helper'\nimport { VaDatePickerModelValue } from '../../va-date-picker/types/types'\n\n/**\n * This guard is used to prevent updating modelValue if range end is not specified.\n * This guard provides reset method, that allow us to reset VaDateInput value if dropdown is closed.\n */\nexport const useRangeModelValueGuard = (\n  modelValue: Ref<VaDatePickerModelValue | undefined>,\n  disabled: Ref<boolean>,\n) => {\n  const bufferValue = ref<VaDatePickerModelValue | undefined>(modelValue.value)\n\n  const valueComputed = computed<VaDatePickerModelValue | undefined>({\n    get: () => bufferValue.value,\n    set: (value) => {\n      if (disabled.value) {\n        bufferValue.value = value\n        modelValue.value = value\n      }\n\n      if (!value) {\n        modelValue.value = value\n        bufferValue.value = value\n        return\n      }\n\n      if (isRange(value)) {\n        if (value.end !== null) {\n          modelValue.value = value\n        }\n      } else {\n        modelValue.value = value\n      }\n\n      bufferValue.value = value\n    },\n  })\n\n  watch(modelValue, (newValue) => {\n    if (newValue) { bufferValue.value = newValue }\n  })\n\n  const reset = () => {\n    if (bufferValue.value && isRange(bufferValue.value)) {\n      bufferValue.value = modelValue.value\n    }\n  }\n\n  return {\n    valueComputed,\n    reset,\n  }\n}\n"],"names":["useRangeModelValueGuard","modelValue","disabled","bufferValue","ref","value","valueComputed","computed","get","set","isRange","end","watch","newValue","reset"],"mappings":"oIAQaA,EAA0B,CACrCC,EACAC,KAEA,MAAMC,EAAcC,EAAwCH,EAAWI,OAEjEC,EAAgBC,EAA6C,CACjEC,IAAK,IAAML,EAAYE,MACvBI,IAAMJ,IAMJ,GALIH,EAASG,QACXF,EAAYE,MAAQA,EACpBJ,EAAWI,MAAQA,IAGhBA,EAGH,OAFAJ,EAAWI,MAAQA,OACnBF,EAAYE,MAAQA,GAIlBK,EAAQL,GACQ,OAAdA,EAAMM,MACRV,EAAWI,MAAQA,GAGrBJ,EAAWI,MAAQA,EAGrBF,EAAYE,MAAQA,KAIxBO,EAAMX,GAAaY,IACbA,IAAYV,EAAYE,MAAQQ,MAStC,MAAO,CACLP,cAAAA,EACAQ,MARY,KACRX,EAAYE,OAASK,EAAQP,EAAYE,SAC3CF,EAAYE,MAAQJ,EAAWI"}