{"version":3,"file":"va-date-picker-calendar-hook.js","sources":["../../../../../../src/components/va-date-picker/components/VaDayPicker/va-date-picker-calendar-hook.ts"],"sourcesContent":["import { computed, Ref } from 'vue'\nimport { VaDatePickerView } from '../../types/types'\n\n/** Returns last day of previous month */\nexport const getMonthDaysCount = (year: number, month: number): number => new Date(year, month + 1, 0).getDate()\n\nexport const getMonthStartWeekday = (year: number, month: number) => new Date(year, month, 1).getDay()\n\n/** Returns array from 1 to length */\nexport const getNumbersArray = (length: number) => Array.from(Array(length).keys()).map((k) => k + 1)\n\nexport const useVaDatePickerCalendar = (view: Ref<VaDatePickerView>, options?: { firstWeekday?: Ref<'Monday' | 'Sunday'> }) => {\n  const CALENDAR_ROWS_COUNT = 6 // Need 6 rows if first day of a month is Saturday and the last day is Monday 31th.\n\n  const localizeWeekday = (weekdayNumber: number) => {\n    if (options && options.firstWeekday?.value === 'Monday') {\n      // Set Sunday as 7th day of the week and Monday as first day of the week.\n      return weekdayNumber === 0 ? 6 : weekdayNumber - 1\n    }\n\n    return weekdayNumber\n  }\n\n  const currentMonthStartWeekday = computed(() => localizeWeekday(getMonthStartWeekday(view.value.year, view.value.month)))\n\n  const getPreviousDates = () => {\n    if (currentMonthStartWeekday.value === 0) { return [] }\n\n    const prevMonthDaysCount = getMonthDaysCount(view.value.year, view.value.month - 1)\n    const prevMonthDays: number[] = getNumbersArray(prevMonthDaysCount)\n\n    return prevMonthDays\n      .slice(-currentMonthStartWeekday.value)\n      .map((d) => new Date(view.value.year, view.value.month - 1, d))\n  }\n\n  const getCurrentDates = () => {\n    const currentMonthDays: number[] = getNumbersArray(getMonthDaysCount(view.value.year, view.value.month))\n\n    return currentMonthDays.map((d) => new Date(view.value.year, view.value.month, d))\n  }\n\n  const prevAndCurrentDays = computed(() => [...getPreviousDates(), ...getCurrentDates()])\n  const currentMonthEndIndex = computed(() => prevAndCurrentDays.value.length)\n\n  const calendarDates = computed(() => {\n    const days = prevAndCurrentDays.value\n\n    const daysRemaining = 7 * CALENDAR_ROWS_COUNT - days.length\n\n    const nextMonthDaysCount = getMonthDaysCount(view.value.year, view.value.month + 1)\n    const nextMonthDays: number[] = getNumbersArray(nextMonthDaysCount)\n\n    return [\n      ...days,\n      ...nextMonthDays\n        .slice(0, daysRemaining)\n        .map((d) => new Date(view.value.year, view.value.month + 1, d)),\n    ]\n  })\n\n  return { calendarDates, currentMonthStartIndex: currentMonthStartWeekday, currentMonthEndIndex }\n}\n"],"names":["getMonthDaysCount","year","month","Date","getDate","getMonthStartWeekday","getDay","getNumbersArray","length","Array","from","keys","map","k","useVaDatePickerCalendar","view","options","currentMonthStartWeekday","computed","localizeWeekday","weekdayNumber","value","firstWeekday","getPreviousDates","prevMonthDaysCount","slice","d","prevAndCurrentDays","currentMonthEndIndex","calendarDates","days","daysRemaining","nextMonthDaysCount","nextMonthDays","currentMonthStartIndex"],"mappings":"qCAIaA,EAAoB,CAACC,EAAcC,IAA0B,IAAIC,KAAKF,EAAMC,EAAQ,EAAG,GAAGE,UAE1FC,EAAuB,CAACJ,EAAcC,IAAkB,IAAIC,KAAKF,EAAMC,EAAO,GAAGI,SAGjFC,EAAmBC,GAAmBC,MAAMC,KAAKD,MAAMD,GAAQG,QAAQC,KAAKC,GAAMA,EAAI,IAEtFC,EAA0B,CAACC,EAA6BC,KACnE,MAWMC,EAA2BC,GAAS,KAAMC,OATvBC,EASuCf,EAAqBU,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,OAR3Gc,GAA2C,sBAAhCA,EAAQM,mCAAcD,OAEV,IAAlBD,EAAsB,EAAIA,EAAgB,EAG5CA,EANe,IAACA,OAWnBG,EAAmB,KACvB,GAAuC,IAAnCN,EAAyBI,MAAe,MAAO,GAEnD,MAAMG,EAAqBxB,EAAkBe,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,MAAQ,GAGjF,OAFgCK,EAAgBiB,GAG7CC,OAAOR,EAAyBI,OAChCT,KAAKc,GAAM,IAAIvB,KAAKY,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,MAAQ,EAAGwB,MAS1DC,EAAqBT,GAAS,IAAM,IAAIK,OALThB,EAAgBP,EAAkBe,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,QAEzEU,KAAKc,GAAM,IAAIvB,KAAKY,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,MAAOwB,QAI3EE,EAAuBV,GAAS,IAAMS,EAAmBN,MAAMb,SAkBrE,MAAO,CAAEqB,cAhBaX,GAAS,KAC7B,MAAMY,EAAOH,EAAmBN,MAE1BU,EAAgB,GAA0BD,EAAKtB,OAE/CwB,EAAqBhC,EAAkBe,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,MAAQ,GAC3E+B,EAA0B1B,EAAgByB,GAEhD,MAAO,IACFF,KACAG,EACAR,MAAM,EAAGM,GACTnB,KAAKc,GAAM,IAAIvB,KAAKY,EAAKM,MAAMpB,KAAMc,EAAKM,MAAMnB,MAAQ,EAAGwB,SAI1CQ,uBAAwBjB,EAA0BW,qBAAAA"}