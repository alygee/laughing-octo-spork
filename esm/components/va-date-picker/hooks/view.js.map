{"version":3,"file":"view.js","sources":["../../../../../src/components/va-date-picker/hooks/view.ts"],"sourcesContent":["import { VaDatePickerView, VaDatePickerViewProp } from './../types/types'\nimport { computed, ref } from 'vue'\n\nconst JANUARY_MONTH_INDEX = 0\nconst DECEMBER_MONTH_INDEX = 11\n\nconst addMonth = (view: VaDatePickerView) => {\n  if (view.month === DECEMBER_MONTH_INDEX) {\n    return { ...view, year: view.year + 1, month: JANUARY_MONTH_INDEX }\n  } else {\n    return { ...view, month: view.month + 1 }\n  }\n}\n\nconst subMonth = (view: VaDatePickerView) => {\n  if (view.month === JANUARY_MONTH_INDEX) {\n    return { ...view, year: view.year - 1, month: DECEMBER_MONTH_INDEX }\n  } else {\n    return { ...view, month: view.month - 1 }\n  }\n}\n\nexport const useView = (\n  props: { [key: string]: any, 'view'?: VaDatePickerViewProp },\n  emit: (event: any | 'update:view', newValue: VaDatePickerViewProp) => any,\n  defaultOverride?: VaDatePickerViewProp,\n) => {\n  const defaultView: VaDatePickerView = {\n    type: 'day',\n    year: new Date().getFullYear(),\n    month: new Date().getMonth(),\n    ...defaultOverride,\n  }\n\n  const statefulView = ref(defaultView)\n\n  const syncView = computed<VaDatePickerView>({\n    get () {\n      // Merge default view and user view prop\n      return { ...statefulView.value, ...props.view }\n    },\n    set (view: VaDatePickerView) {\n      statefulView.value = view\n\n      emit('update:view', view)\n    },\n  })\n\n  const next = () => {\n    if (syncView.value.type === 'day') {\n      syncView.value = addMonth(syncView.value)\n    } else if (syncView.value.type === 'month') {\n      syncView.value = { ...syncView.value, year: syncView.value.year + 1 }\n    }\n  }\n\n  const prev = () => {\n    if (syncView.value.type === 'day') {\n      syncView.value = subMonth(syncView.value)\n    } else if (syncView.value.type === 'month') {\n      syncView.value = { ...syncView.value, year: syncView.value.year - 1 }\n    }\n  }\n\n  return {\n    syncView,\n    next,\n    prev,\n  }\n}\n"],"names":["useView","props","emit","defaultOverride","defaultView","type","year","Date","getFullYear","month","getMonth","statefulView","ref","syncView","computed","get","value","view","set","next","prev"],"mappings":"wCAGA,MAmBaA,EAAU,CACrBC,EACAC,EACAC,KAEA,MAAMC,EAAgC,CACpCC,KAAM,MACNC,MAAM,IAAIC,MAAOC,cACjBC,OAAO,IAAIF,MAAOG,cACfP,GAGCQ,EAAeC,EAAIR,GAEnBS,EAAWC,EAA2B,CAC1CC,IAAG,KAEM,IAAKJ,EAAaK,SAAUf,EAAMgB,OAE3CC,IAAKD,GACHN,EAAaK,MAAQC,EAErBf,EAAK,cAAee,MAoBxB,MAAO,CACLJ,SAAAA,EACAM,KAlBW,KA1CE,IAACF,EA2Cc,QAAxBJ,EAASG,MAAMX,KACjBQ,EAASG,MA9Cc,MAEXC,EA4CcJ,EAASG,OA3C9BP,MACA,IAAKQ,EAAMX,KAAMW,EAAKX,KAAO,EAAGG,MALf,GAOjB,IAAKQ,EAAMR,MAAOQ,EAAKR,MAAQ,GAyCH,UAAxBI,EAASG,MAAMX,OACxBQ,EAASG,MAAQ,IAAKH,EAASG,MAAOV,KAAMO,EAASG,MAAMV,KAAO,KAepEc,KAXW,KA1CE,IAACH,EA2Cc,QAAxBJ,EAASG,MAAMX,KACjBQ,EAASG,MAvDa,KAWVC,EA4CcJ,EAASG,OA3C9BP,MACA,IAAKQ,EAAMX,KAAMW,EAAKX,KAAO,EAAGG,MAZd,IAclB,IAAKQ,EAAMR,MAAOQ,EAAKR,MAAQ,GAyCH,UAAxBI,EAASG,MAAMX,OACxBQ,EAASG,MAAQ,IAAKH,EAASG,MAAOV,KAAMO,EAASG,MAAMV,KAAO"}