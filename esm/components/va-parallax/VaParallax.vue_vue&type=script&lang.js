import{__decorate as t}from"tslib";import{Vue as e,mixins as s,Options as i,prop as r}from"../../node_modules/vue-class-component/dist/vue-class-component.esm-bundler.js";const a=e.with(class{constructor(){this.target=r({type:[Object,String],default:""}),this.src=r({type:String,default:"",required:!0}),this.alt=r({type:String,default:"parallax"}),this.height=r({type:Number,default:400}),this.reversed=r({type:Boolean,default:!1}),this.speed=r({type:Number,default:.5,validator:t=>t>=0&&t<=1})}});let l=class extends(s(a)){constructor(){super(...arguments),this.elOffsetTop=0,this.parallax=0,this.parallaxDist=0,this.percentScrolled=0,this.scrollTop=0,this.windowHeight=0,this.windowBottom=0,this.isLoaded=!1}get computedWrapperStyles(){return{height:this.$props.height+"px"}}get targetElement(){return"string"==typeof this.$props.target?document.querySelector(this.$props.target):this.$props.target||this.$el.parentElement}get computedImgStyles(){return{display:"block",transform:`translate(-50%, ${this.parallax}px)`,opacity:this.isLoaded?1:0,top:this.$props.reversed?0:"auto"}}get imgHeight(){return this.$refs.img.naturalHeight}calcDimensions(){const t=this.$el.getBoundingClientRect();this.scrollTop=this.targetElement.scrollTop,this.parallaxDist=this.imgHeight-this.$props.height,this.elOffsetTop=t.top+this.scrollTop,this.windowHeight=window.innerHeight,this.windowBottom=this.scrollTop+this.windowHeight}translate(){this.calcDimensions(),this.percentScrolled=(this.windowBottom-this.elOffsetTop)/(this.$props.height+this.windowHeight),this.parallax=Math.round(this.parallaxDist*this.percentScrolled)*this.$props.speed,this.$props.reversed&&(this.parallax=-this.parallax)}addEventListeners(){this.targetElement.addEventListener("scroll",this.translate),this.targetElement.addEventListener("resize",this.translate)}removeEventListeners(){this.targetElement.removeEventListener("scroll",this.translate),this.targetElement.removeEventListener("resize",this.translate)}initImage(){const t=this.$refs.img;t.complete?(this.translate(),this.addEventListeners()):t.addEventListener("load",(()=>{this.translate(),this.addEventListeners()}),!1),this.isLoaded=!0}mounted(){this.initImage()}beforeUnmount(){this.removeEventListeners()}};l=t([i({name:"VaParallax"})],l);var o=l;export default o;
//# sourceMappingURL=VaParallax.vue_vue&type=script&lang.js.map
